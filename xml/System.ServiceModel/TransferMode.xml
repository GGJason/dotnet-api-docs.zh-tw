<Type Name="TransferMode" FullName="System.ServiceModel.TransferMode">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="f21315cf2ada779e52053e932b9761c263886bcc" />
    <Meta Name="ms.sourcegitcommit" Value="d31dc2ede16f6f7bc64e90d9f897ff54c4e3869b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="zh-TW" />
    <Meta Name="ms.lasthandoff" Value="04/03/2018" />
  </Metadata>
  <TypeSignature Language="C#" Value="public enum TransferMode" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed TransferMode extends System.Enum" />
  <TypeSignature Language="DocId" Value="T:System.ServiceModel.TransferMode" />
  <TypeSignature Language="VB.NET" Value="Public Enum TransferMode" />
  <TypeSignature Language="C++ CLI" Value="public enum class TransferMode" />
  <AssemblyInfo>
    <AssemblyName>System.ServiceModel</AssemblyName>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
    <AssemblyVersion>4.1.0.0</AssemblyVersion>
    <AssemblyVersion>4.1.1.0</AssemblyVersion>
    <AssemblyVersion>4.2.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Enum</BaseTypeName>
  </Base>
  <Docs>
    <summary>
      <span data-ttu-id="fdeb3-101">表示通道對要求與回應訊息的傳輸是否使用資料流或緩衝模式。</span>
      <span class="sxs-lookup">
        <span data-stu-id="fdeb3-101">Indicates whether a channel uses streamed or buffered modes for the transfer of request and response messages.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 [!INCLUDE[indigo1](~/includes/indigo1-md.md)]<span data-ttu-id="fdeb3-102"> 傳輸每個方向都支援兩種傳輸訊息的模式：</span><span class="sxs-lookup"><span data-stu-id="fdeb3-102"> transports support two modes of transferring messages in each direction:</span></span>  
  
-   <span data-ttu-id="fdeb3-103">緩衝處理的傳輸會將整個訊息保留在記憶體緩衝區中，直到完成傳輸作業為止。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-103">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span>  
  
-   <span data-ttu-id="fdeb3-104">資料流處理的傳輸只緩衝訊息標頭，而公開訊息本文為資料流，每次讀取較小部分的資料。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-104">Streamed transfers only buffer the message headers and expose the message body as a stream, from which smaller portions can be read at a time.</span></span>  
  
 <span data-ttu-id="fdeb3-105">將傳輸模式設定為 Streamed 啟用雙向資料流通訊。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-105">Setting the transfer mode to Streamed enables streaming communication in both directions.</span></span> <span data-ttu-id="fdeb3-106">StreamedRequest 或 StreamedResponse 設定傳輸模式可讓資料流只指定方向的通訊。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-106">Setting the transfer mode to StreamedRequest or StreamedResponse enables streaming communication only in the indicated direction.</span></span>  
  
 <span data-ttu-id="fdeb3-107">資料流處理的傳輸可以藉由消除大量記憶體緩衝區的需求來改善服務的延展性 (Scalability)。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-107">Streamed transfers can improve the scalability of a service by eliminating the need for large memory buffers.</span></span> <span data-ttu-id="fdeb3-108">變更傳輸模式是否真能改善延展性，實際需視所傳輸的訊息大小而定。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-108">Whether changing the transfer mode actually improves scalability in practice depends on the size of the messages being transferred.</span></span> <span data-ttu-id="fdeb3-109">當大型訊息使用資料流而非緩衝傳輸時，延展性的改善應當最為顯著。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-109">Improvements in scalability should be most evident when large messages use streamed instead of buffered transfers.</span></span>  
  
 <span data-ttu-id="fdeb3-110">根據預設，HTTP、TCP/IP 和具名管道等傳輸都使用緩衝處理訊息傳輸方式。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-110">By default, the HTTP, TCP/IP and named pipe transports use buffered message transfers.</span></span> <span data-ttu-id="fdeb3-111">您可在 <xref:System.ServiceModel.TransferMode.Streamed>、<xref:System.ServiceModel.BasicHttpBinding>、<xref:System.ServiceModel.NetTcpBinding> 系統提供之繫結上，使用它們公開的傳輸模式屬性，設定 <xref:System.ServiceModel.NetNamedPipeBinding> 的值。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-111">You can set the values of <xref:System.ServiceModel.TransferMode.Streamed> on the <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, <xref:System.ServiceModel.NetNamedPipeBinding> system-provided bindings using the transfer mode properties exposed on them.</span></span> <span data-ttu-id="fdeb3-112">可在 <xref:System.ServiceModel.NetTcpBinding><xref:System.ServiceModel.NetTcpBinding.TransferMode%2A>上設定模式，例如，使用  屬性。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-112">The mode can be set on the <xref:System.ServiceModel.NetTcpBinding>, for example, by using the <xref:System.ServiceModel.NetTcpBinding.TransferMode%2A> property.</span></span> <span data-ttu-id="fdeb3-113">它也可在繫結的組態區段中設定。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-113">It can also be set in the configuration section for the binding.</span></span>  
  
 <span data-ttu-id="fdeb3-114">對於不公開傳輸模式屬性的繫結，傳輸模式可在傳輸的繫結項目上設定，然後此項目可新增至自訂繫結。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-114">For bindings that do not expose the transfer mode property, the transfer mode can be set on the binding element of the transport and this element can then be added to a custom binding.</span></span> <span data-ttu-id="fdeb3-115">例如，建立 <xref:System.ServiceModel.Channels.HttpTransportBindingElement> 並在建立自訂繫時，使用 <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.TransferMode%2A> 屬性設定傳輸模式。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-115">For example, create an <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and use the <xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.TransferMode%2A> property to set the transfer mode when creating a custom binding.</span></span> <span data-ttu-id="fdeb3-116">傳輸模式也可在自訂繫結的組態區段中設定。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-116">The transfer mode can also be set in the configuration section for the custom binding.</span></span>  
  
 <span data-ttu-id="fdeb3-117">使用緩衝或資料流傳輸的決定是在 HTTP 傳輸端點本機上決定的。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-117">The decision to use either buffered or streamed transfers is a local decision of the endpoint for HTTP transports.</span></span> <span data-ttu-id="fdeb3-118">對於 HTTP 傳輸，傳輸模式不會透過連線傳播，或是傳播到 Proxy 伺服器或其他媒介。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-118">For HTTP transports, the transfer mode does not propagate across a connection, or to proxy servers or other intermediaries.</span></span> <span data-ttu-id="fdeb3-119">設定傳輸模式不會反映在服務合約的描述中。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-119">Setting the transfer mode is not reflected in the description of the service contract.</span></span> <span data-ttu-id="fdeb3-120">為服務產生 Proxy 之後，您可以 (允許但並非必要) 為要搭配資料流傳輸使用的服務編輯組態檔，以設定傳輸模式。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-120">After generating a proxy to a service, you can (it is allowed but not required) edit the configuration file for services intended to be used with streamed transfers to set the transfer mode.</span></span> <span data-ttu-id="fdeb3-121">如果是 TCP 和具名管道傳輸，會傳播傳輸模式做為原則判斷提示。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-121">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="fdeb3-122">使用 Streamed 傳輸模式，會造成[!INCLUDE[indigo2](~/includes/indigo2-md.md)]執行階段強制執行其他限制。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-122">Using the Streamed transfer mode causes the [!INCLUDE[indigo2](~/includes/indigo2-md.md)] runtime to enforce some restrictions.</span></span>  
  
-   <span data-ttu-id="fdeb3-123">在資料流處理的傳輸中發生的作業，會與最多一個輸入和/或一個輸出參數 (在程式設計模型層) 簽訂合約。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-123">Operations that occur across a streamed transport can have a contract with at most one input and/or one output parameter at the programming model layer.</span></span> <span data-ttu-id="fdeb3-124">該參數對應於整個訊息本文而且必定是 <xref:System.ServiceModel.Channels.Message>、<xref:System.IO.Stream> 的子類型或是 <xref:System.Xml.Serialization.IXmlSerializable> 介面的實作。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-124">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, be a subtype of <xref:System.IO.Stream>, or implement the <xref:System.Xml.Serialization.IXmlSerializable> interface.</span></span> <span data-ttu-id="fdeb3-125">擁有作業的傳回值，相當於擁有輸出參數。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-125">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
-   <span data-ttu-id="fdeb3-126">某些 [!INCLUDE[indigo2](~/includes/indigo2-md.md)] 功能，例如可靠的訊息傳送與 SOAP 訊息層級安全性，都需仰賴緩衝處理的訊息來進行傳輸。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-126">Some [!INCLUDE[indigo2](~/includes/indigo2-md.md)] features such as Reliable Messaging and SOAP message-level security rely on buffering messages for transmissions.</span></span> <span data-ttu-id="fdeb3-127">使用這些功能可能減少或消除使用資料流處理模式而獲得的效能優勢。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-127">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="fdeb3-128">若要保護資料流處理傳輸的安全，請單純使用傳輸層級安全性，或是使用混合模式安全性，也就是 WS-Security 與傳輸安全性的結合。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-128">To secure a streamed transport, use transport level security only or use mixed-mode security, which combines WS-Security claims with transport security.</span></span>  
  
-   <span data-ttu-id="fdeb3-129">SOAP 標頭一定會緩衝處理，即使 Streamed 來設定傳輸模式。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-129">SOAP headers are always buffered, even when the transfer mode is set to Streamed.</span></span> <span data-ttu-id="fdeb3-130">訊息的標頭不得超出 MaxBufferSize 傳輸配額的大小。此配額於各種繫結與繫結項目上公開。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-130">The headers for a message must not exceed the size of the MaxBufferSize transport quota which is exposed on the various bindings and binding elements.</span></span>  
  
 <span data-ttu-id="fdeb3-131">從緩衝的傳輸模式變更為 「 Streamed 也會變更 TCP 和具名的管道傳輸的原生通道類型。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-131">Changing the transfer mode from Buffered to Streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="fdeb3-132">對於緩衝處理的傳輸來說，原生的通道類型為 <xref:System.ServiceModel.Channels.IDuplexSessionChannel>。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-132">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="fdeb3-133">對於資料流處理的傳輸來說，原生通道為 <xref:System.ServiceModel.Channels.IRequestChannel> 和 <xref:System.ServiceModel.Channels.IReplyChannel>。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-133">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="fdeb3-134">結果就是工作階段服務合約無法搭配傳輸資料流使用。</span><span class="sxs-lookup"><span data-stu-id="fdeb3-134">A consequence of this is that sessionful service contracts cannot be used with transport streaming.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="fdeb3-135">下列程式碼範例會示範設定<xref:System.ServiceModel.TransferMode>Streamed 要透過程式碼的屬性：</span><span class="sxs-lookup"><span data-stu-id="fdeb3-135">The following code sample shows setting the <xref:System.ServiceModel.TransferMode> property to Streamed through code:</span></span>  
  
 <span data-ttu-id="fdeb3-136">**c#**</span><span class="sxs-lookup"><span data-stu-id="fdeb3-136">**c#**</span></span>  
  
```  
TcpTransportBindingElement transport = new TcpTransportBindingElement();  
transport.TransferMode = TransferMode.Streamed;  
BinaryMessageEncodingBindingElement encoder = new BinaryMessageEncodingBindingElement();  
CustomBinding binding = new CustomBinding(encoder, transport);  
```  
  
 <span data-ttu-id="fdeb3-137">下列範例將示範<xref:System.ServiceModel.TransferMode.Streamed>Streamed 透過組態屬性：</span><span class="sxs-lookup"><span data-stu-id="fdeb3-137">The following sample shows <xref:System.ServiceModel.TransferMode.Streamed> property to Streamed through configuration:</span></span>  
  
```  
<customBinding>  
    <binding name="streamingBinding">  
        <binaryMessageEncoding />  
            <tcpTransport transferMode="Streamed" />  
     </binding>  
</customBinding>  
```  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName="Buffered">
      <MemberSignature Language="C#" Value="Buffered" />
      <MemberSignature Language="ILAsm" Value=".field public static literal valuetype System.ServiceModel.TransferMode Buffered = int32(0)" />
      <MemberSignature Language="DocId" Value="F:System.ServiceModel.TransferMode.Buffered" />
      <MemberSignature Language="VB.NET" Value="Buffered" />
      <MemberSignature Language="C++ CLI" Value="Buffered" />
      <MemberType>Field</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.ServiceModel.TransferMode</ReturnType>
      </ReturnValue>
      <MemberValue>0</MemberValue>
      <Docs>
        <summary>
          <span data-ttu-id="fdeb3-138">要求訊息和回應訊息皆以緩衝處理。</span>
          <span class="sxs-lookup">
            <span data-stu-id="fdeb3-138">The request and response messages are both buffered.</span>
          </span>
        </summary>
      </Docs>
    </Member>
    <Member MemberName="Streamed">
      <MemberSignature Language="C#" Value="Streamed" />
      <MemberSignature Language="ILAsm" Value=".field public static literal valuetype System.ServiceModel.TransferMode Streamed = int32(1)" />
      <MemberSignature Language="DocId" Value="F:System.ServiceModel.TransferMode.Streamed" />
      <MemberSignature Language="VB.NET" Value="Streamed" />
      <MemberSignature Language="C++ CLI" Value="Streamed" />
      <MemberType>Field</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.ServiceModel.TransferMode</ReturnType>
      </ReturnValue>
      <MemberValue>1</MemberValue>
      <Docs>
        <summary>
          <span data-ttu-id="fdeb3-139">要求訊息和回應訊息皆以資料流處理。</span>
          <span class="sxs-lookup">
            <span data-stu-id="fdeb3-139">The request and response messages are both streamed.</span>
          </span>
        </summary>
      </Docs>
    </Member>
    <Member MemberName="StreamedRequest">
      <MemberSignature Language="C#" Value="StreamedRequest" />
      <MemberSignature Language="ILAsm" Value=".field public static literal valuetype System.ServiceModel.TransferMode StreamedRequest = int32(2)" />
      <MemberSignature Language="DocId" Value="F:System.ServiceModel.TransferMode.StreamedRequest" />
      <MemberSignature Language="VB.NET" Value="StreamedRequest" />
      <MemberSignature Language="C++ CLI" Value="StreamedRequest" />
      <MemberType>Field</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.ServiceModel.TransferMode</ReturnType>
      </ReturnValue>
      <MemberValue>2</MemberValue>
      <Docs>
        <summary>
          <span data-ttu-id="fdeb3-140">資料流處理要求訊息，緩衝處理回應訊息。</span>
          <span class="sxs-lookup">
            <span data-stu-id="fdeb3-140">The request message is streamed and the response message is buffered.</span>
          </span>
        </summary>
      </Docs>
    </Member>
    <Member MemberName="StreamedResponse">
      <MemberSignature Language="C#" Value="StreamedResponse" />
      <MemberSignature Language="ILAsm" Value=".field public static literal valuetype System.ServiceModel.TransferMode StreamedResponse = int32(3)" />
      <MemberSignature Language="DocId" Value="F:System.ServiceModel.TransferMode.StreamedResponse" />
      <MemberSignature Language="VB.NET" Value="StreamedResponse" />
      <MemberSignature Language="C++ CLI" Value="StreamedResponse" />
      <MemberType>Field</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.ServiceModel.TransferMode</ReturnType>
      </ReturnValue>
      <MemberValue>3</MemberValue>
      <Docs>
        <summary>
          <span data-ttu-id="fdeb3-141">緩衝處理要求訊息，資料流處理回應訊息。</span>
          <span class="sxs-lookup">
            <span data-stu-id="fdeb3-141">The request message is buffered and the response message is streamed.</span>
          </span>
        </summary>
      </Docs>
    </Member>
  </Members>
</Type>