<Type Name="ComponentGuaranteesAttribute" FullName="System.Runtime.Versioning.ComponentGuaranteesAttribute">
  <TypeSignature Language="C#" Value="public sealed class ComponentGuaranteesAttribute : Attribute" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed beforefieldinit ComponentGuaranteesAttribute extends System.Attribute" />
  <TypeSignature Language="DocId" Value="T:System.Runtime.Versioning.ComponentGuaranteesAttribute" />
  <TypeSignature Language="VB.NET" Value="Public NotInheritable Class ComponentGuaranteesAttribute&#xA;Inherits Attribute" />
  <TypeSignature Language="C++ CLI" Value="public ref class ComponentGuaranteesAttribute sealed : Attribute" />
  <AssemblyInfo>
    <AssemblyName>mscorlib</AssemblyName>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>netstandard</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Runtime.Extensions</AssemblyName>
    <AssemblyVersion>4.2.0.0</AssemblyVersion>
    <AssemblyVersion>4.2.1.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Attribute</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute>
      <AttributeName>System.AttributeUsage(System.AttributeTargets.Assembly | System.AttributeTargets.Module | System.AttributeTargets.Class | System.AttributeTargets.Struct | System.AttributeTargets.Enum | System.AttributeTargets.Constructor | System.AttributeTargets.Method | System.AttributeTargets.Property | System.AttributeTargets.Event | System.AttributeTargets.Interface | System.AttributeTargets.Delegate, AllowMultiple=false, Inherited=false)</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary><span data-ttu-id="82aab-101">定義可能應用在多個版本中的元件、型別或型別成員之相容性保障。</span><span class="sxs-lookup"><span data-stu-id="82aab-101">Defines the compatibility guarantee of a component, type, or type member that may span multiple versions.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="82aab-102"><xref:System.Runtime.Versioning.ComponentGuaranteesAttribute>由元件和類別庫的開發人員用來表示其程式庫的取用者可以預期在多個版本的相容性層級。</span><span class="sxs-lookup"><span data-stu-id="82aab-102">The <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute> is used by developers of components and class libraries to indicate the level of compatibility that consumers of their libraries can expect across multiple versions.</span></span> <span data-ttu-id="82aab-103">它表示在程式庫或元件的未來版本將不會中斷現有用戶端的保證層級。</span><span class="sxs-lookup"><span data-stu-id="82aab-103">It indicates the level of guarantee that a future version of the library or component will not break an existing client.</span></span> <span data-ttu-id="82aab-104">用戶端接著可以使用<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute>設計自己的介面，以確保穩定性不同版本之間協助。</span><span class="sxs-lookup"><span data-stu-id="82aab-104">Clients can then use the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute> as an aid in designing their own interfaces to ensure stability across versions.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="82aab-105">Common language runtime (CLR) 不以任何方式使用此屬性。</span><span class="sxs-lookup"><span data-stu-id="82aab-105">The common language runtime (CLR) does not use this attribute in any way.</span></span> <span data-ttu-id="82aab-106">正式記載元件作者的意圖在於它的值。</span><span class="sxs-lookup"><span data-stu-id="82aab-106">Its value lies in formally documenting the intent of the component author.</span></span> <span data-ttu-id="82aab-107">編譯時期工具也可以使用這些宣告來偵測的編譯時期錯誤，否則會破壞宣告的保證。</span><span class="sxs-lookup"><span data-stu-id="82aab-107">Compile-time tools can also use these declarations to detect compile-time errors that would otherwise break the declared guarantee.</span></span>  
  
## <a name="levels-of-compatibility"></a><span data-ttu-id="82aab-108">相容性層級</span><span class="sxs-lookup"><span data-stu-id="82aab-108">Levels of Compatibility</span></span>  
 <span data-ttu-id="82aab-109"><xref:System.Runtime.Versioning.ComponentGuaranteesAttribute>支援下列層級的相容性，其中的成員都由<xref:System.Runtime.Versioning.ComponentGuaranteesOptions>列舉型別：</span><span class="sxs-lookup"><span data-stu-id="82aab-109">The <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute> supports the following levels of compatibility, which are represented by members of the <xref:System.Runtime.Versioning.ComponentGuaranteesOptions> enumeration:</span></span>  
  
-   <span data-ttu-id="82aab-110">任何版本的版本相容性 (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None?displayProperty=nameWithType>)。</span><span class="sxs-lookup"><span data-stu-id="82aab-110">No version-to-version compatibility (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None?displayProperty=nameWithType>).</span></span> <span data-ttu-id="82aab-111">用戶端可以預期未來版本將會中斷現有用戶端。</span><span class="sxs-lookup"><span data-stu-id="82aab-111">The client can expect that future versions will break the existing client.</span></span> <span data-ttu-id="82aab-112">如需詳細資訊，請參閱[無相容](#None)本主題稍後的章節。</span><span class="sxs-lookup"><span data-stu-id="82aab-112">For more information, see the [No Compatibility](#None) section later in this topic.</span></span>  
  
-   <span data-ttu-id="82aab-113">由並行版本的版本相容性 (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide?displayProperty=nameWithType>)。</span><span class="sxs-lookup"><span data-stu-id="82aab-113">Side-by-side version-to-version compatibility (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide?displayProperty=nameWithType>).</span></span> <span data-ttu-id="82aab-114">元件已經過測試時相同的應用程式定義域中載入的組件的多個版本運作。</span><span class="sxs-lookup"><span data-stu-id="82aab-114">The component has been tested to work when more than one version of the assembly is loaded in the same application domain.</span></span> <span data-ttu-id="82aab-115">一般情況下，未來版本可能會破壞相容性。</span><span class="sxs-lookup"><span data-stu-id="82aab-115">In general, future versions can break compatibility.</span></span> <span data-ttu-id="82aab-116">不過，重大變更時，舊的版本則不會修改，但與新的版本。</span><span class="sxs-lookup"><span data-stu-id="82aab-116">However, when breaking changes are made, the old version is not modified but exists alongside the new version.</span></span> <span data-ttu-id="82aab-117">並存執行是預期的方式進行重大變更時所使用的現有用戶端。</span><span class="sxs-lookup"><span data-stu-id="82aab-117">Side-by-side execution is the expected way to make existing clients work when breaking changes are made.</span></span> <span data-ttu-id="82aab-118">如需詳細資訊，請參閱[-並存相容性](#SideBySide)本主題稍後的章節。</span><span class="sxs-lookup"><span data-stu-id="82aab-118">For more information, see the [Side-by-Side Compatibility](#SideBySide) section later in this topic.</span></span>  
  
-   <span data-ttu-id="82aab-119">穩定版本的版本相容性 (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable?displayProperty=nameWithType>)。</span><span class="sxs-lookup"><span data-stu-id="82aab-119">Stable version-to-version compatibility (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable?displayProperty=nameWithType>).</span></span> <span data-ttu-id="82aab-120">未來的版本應該不會中斷用戶端，並不需要為並存執行。</span><span class="sxs-lookup"><span data-stu-id="82aab-120">Future versions should not break the client, and side-by-side execution should not be needed.</span></span> <span data-ttu-id="82aab-121">不過，如果用戶端是不小心中斷的它可能無法使用-並存執行來修正此問題。</span><span class="sxs-lookup"><span data-stu-id="82aab-121">However, if the client is inadvertently broken, it may be possible to use side-by-side execution to fix the problem.</span></span> <span data-ttu-id="82aab-122">如需詳細資訊，請參閱[穩定的相容性](#Standard)> 一節。</span><span class="sxs-lookup"><span data-stu-id="82aab-122">For more information, see the [Stable Compatibility](#Standard) section.</span></span>  
  
-   <span data-ttu-id="82aab-123">交換版本的版本相容性 (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange?displayProperty=nameWithType>)。</span><span class="sxs-lookup"><span data-stu-id="82aab-123">Exchange version-to-version compatibility (<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange?displayProperty=nameWithType>).</span></span> <span data-ttu-id="82aab-124">特別是小心確保未來版本將不會中斷用戶端。</span><span class="sxs-lookup"><span data-stu-id="82aab-124">Extraordinary care is taken to ensure that future versions will not break the client.</span></span> <span data-ttu-id="82aab-125">用戶端應該使用僅限這些類型的簽章可用來與其他組件部署彼此通訊的介面中。</span><span class="sxs-lookup"><span data-stu-id="82aab-125">The client should use only these types in the signature of interfaces that are used for communication with other assemblies that are deployed independently of one another.</span></span> <span data-ttu-id="82aab-126">只有一個版本的這些型別必須是在指定的應用程式網域中，這表示如果用戶端中斷時，由並行執行無法修正相容性問題。</span><span class="sxs-lookup"><span data-stu-id="82aab-126">Only one version of these types is expected to be in a given application domain, which means that if a client breaks, side-by-side execution cannot fix the compatibility problem.</span></span> <span data-ttu-id="82aab-127">如需詳細資訊，請參閱[Exchange 類型相容性](#Exchange)> 一節。</span><span class="sxs-lookup"><span data-stu-id="82aab-127">For more information, see the [Exchange Type Compatibility](#Exchange) section.</span></span>  
  
 <span data-ttu-id="82aab-128">下列章節會討論每個層級的更詳細的保證。</span><span class="sxs-lookup"><span data-stu-id="82aab-128">The following sections discuss each level of guarantee in greater detail.</span></span>  
  
<a name="None"></a>   
### <a name="no-compatibility"></a><span data-ttu-id="82aab-129">不相容性</span><span class="sxs-lookup"><span data-stu-id="82aab-129">No Compatibility</span></span>  
 <span data-ttu-id="82aab-130">標記做為元件<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None?displayProperty=nameWithType>指出提供者，並不保證相容性。</span><span class="sxs-lookup"><span data-stu-id="82aab-130">Marking a component as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None?displayProperty=nameWithType> indicates that the provider makes no guarantees about compatibility.</span></span> <span data-ttu-id="82aab-131">用戶端應避免採用任何相依項目上公開的介面。</span><span class="sxs-lookup"><span data-stu-id="82aab-131">Clients should avoid taking any dependencies on the exposed interfaces.</span></span> <span data-ttu-id="82aab-132">此相容性層級可用於實驗或，都公開屬性，但僅供一定會同時更新的元件類型。</span><span class="sxs-lookup"><span data-stu-id="82aab-132">This level of compatibility is useful for types that are experimental or that are publicly exposed but are intended only for components that are always updated at the same time.</span></span> <span data-ttu-id="82aab-133"><xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None> 明確表示不應該由外部元件使用此元件。</span><span class="sxs-lookup"><span data-stu-id="82aab-133"><xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None> explicitly indicates that this component should not be used by external components.</span></span>  
  
<a name="SideBySide"></a>   
### <a name="side-by-side-compatibility"></a><span data-ttu-id="82aab-134">並存相容性</span><span class="sxs-lookup"><span data-stu-id="82aab-134">Side-by-Side Compatibility</span></span>  
 <span data-ttu-id="82aab-135">標記做為元件<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide?displayProperty=nameWithType>指出元件已經過測試以使用多個版本的組件載入至相同的應用程式定義域時。</span><span class="sxs-lookup"><span data-stu-id="82aab-135">Marking a component as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide?displayProperty=nameWithType> indicates that the component has been tested to work when more than one version of the assembly is loaded into the same application domain.</span></span> <span data-ttu-id="82aab-136">重大變更允許的長度不會對具有更高的版本號碼之組件。</span><span class="sxs-lookup"><span data-stu-id="82aab-136">Breaking changes are allowed as long as they are made to the assembly that has the greater version number.</span></span> <span data-ttu-id="82aab-137">繫結至較舊版本的組件的元件應繼續繫結至舊的版本，而其他元件可以繫結至新的版本中。</span><span class="sxs-lookup"><span data-stu-id="82aab-137">Components that are bound to an old version of the assembly are expected to continue to bind to the old version, and other components can bind to the new version.</span></span> <span data-ttu-id="82aab-138">您也可更新的元件，會宣告為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide>破壞性的方式修改舊的版本。</span><span class="sxs-lookup"><span data-stu-id="82aab-138">It is also possible to update a component that is declared to be <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide> by destructively modifying the old version.</span></span>  
  
<a name="Standard"></a>   
### <a name="stable-compatibility"></a><span data-ttu-id="82aab-139">穩定的相容性</span><span class="sxs-lookup"><span data-stu-id="82aab-139">Stable Compatibility</span></span>  
 <span data-ttu-id="82aab-140">標記類型為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable?displayProperty=nameWithType>指出不同版本之間應該維持穩定的型別。</span><span class="sxs-lookup"><span data-stu-id="82aab-140">Marking a type as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable?displayProperty=nameWithType> indicates that the type should remain stable across versions.</span></span> <span data-ttu-id="82aab-141">不過，它也可能由並行版本的穩定的型別存在於相同的應用程式定義域。</span><span class="sxs-lookup"><span data-stu-id="82aab-141">However, it may also be possible for side-by-side versions of a stable type to exist in the same application domain.</span></span>  
  
 <span data-ttu-id="82aab-142">穩定的型別會維護高二進位碼相容性列。</span><span class="sxs-lookup"><span data-stu-id="82aab-142">Stable types maintain a high binary compatibility bar.</span></span> <span data-ttu-id="82aab-143">因為這個緣故，提供者應該避免對穩定的型別進行重大變更。</span><span class="sxs-lookup"><span data-stu-id="82aab-143">Because of this, providers should avoid making breaking changes to stable types.</span></span> <span data-ttu-id="82aab-144">可接受的下列幾種變更：</span><span class="sxs-lookup"><span data-stu-id="82aab-144">The following kinds of changes are acceptable:</span></span>  
  
-   <span data-ttu-id="82aab-145">私用執行個體欄位中加入或移除欄位，型別，因為這不會中斷的序列化格式。</span><span class="sxs-lookup"><span data-stu-id="82aab-145">Adding private instance fields to, or removing fields from, a type, as long as this does not break the serialization format.</span></span>  
  
-   <span data-ttu-id="82aab-146">將不可序列化的型別變更為可序列化的型別。</span><span class="sxs-lookup"><span data-stu-id="82aab-146">Changing a non-serializable type to a serializable type.</span></span> <span data-ttu-id="82aab-147">（不過，可序列化的型別不能變更為非可序列化的型別）。</span><span class="sxs-lookup"><span data-stu-id="82aab-147">(However, a serializable type cannot be changed to a non-serializable type.)</span></span>  
  
-   <span data-ttu-id="82aab-148">擲回新的、 多衍生的例外狀況的方法。</span><span class="sxs-lookup"><span data-stu-id="82aab-148">Throwing new, more derived exceptions from a method.</span></span>  
  
-   <span data-ttu-id="82aab-149">改善效能的方法。</span><span class="sxs-lookup"><span data-stu-id="82aab-149">Improving the performance of a method.</span></span>  
  
-   <span data-ttu-id="82aab-150">只要變更不會造成不良影響大部分的用戶端，請變更傳回值的範圍。</span><span class="sxs-lookup"><span data-stu-id="82aab-150">Changing the range of return values, as long as the change does not adversely affect the majority of clients.</span></span>  
  
-   <span data-ttu-id="82aab-151">如果業務理由很高，而且造成負面影響的用戶端數目很低，請修正嚴重的錯誤。</span><span class="sxs-lookup"><span data-stu-id="82aab-151">Fixing serious bugs, if the business justification is high and the number of adversely affected clients is low.</span></span>  
  
 <span data-ttu-id="82aab-152">因為新版本的穩定的元件不會中斷現有用戶端，通常只有一個版本的穩定元件需要應用程式定義域中。</span><span class="sxs-lookup"><span data-stu-id="82aab-152">Because new versions of stable components are not expected to break existing clients, generally only one version of a stable component is needed in an application domain.</span></span> <span data-ttu-id="82aab-153">不過，這不是必要條件，因為穩定的類型不會使用所有元件都同意的已知的交換類型。</span><span class="sxs-lookup"><span data-stu-id="82aab-153">However, this is not a requirement, because stable types are not used as well-known exchange types that all components agree upon.</span></span> <span data-ttu-id="82aab-154">因此，如果穩定元件的新版本沒有不小心中斷某個元件，而且需要新版本的其他元件，它可能無法載入同時舊的和新元件，以解決此問題。</span><span class="sxs-lookup"><span data-stu-id="82aab-154">Therefore, if a new version of a stable component does inadvertently break some component, and if other components need the new version, it may be possible to fix the problem by loading both the old and new component.</span></span>  
  
 <span data-ttu-id="82aab-155"><xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> 提供更強的版本相容性保證比<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>。</span><span class="sxs-lookup"><span data-stu-id="82aab-155"><xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> provides a stronger version compatibility guarantee than <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>.</span></span> <span data-ttu-id="82aab-156">它是多個版本元件的一般預設值。</span><span class="sxs-lookup"><span data-stu-id="82aab-156">It is a common default for multi-version components.</span></span>  
  
 <span data-ttu-id="82aab-157"><xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> 可以結合<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide>，其狀態不會中斷相容性元件，但是會測試工作時指定的應用程式定義域中載入多個版本。</span><span class="sxs-lookup"><span data-stu-id="82aab-157"><xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> can be combined with <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.SideBySide>, which states that the component will not break compatibility but is tested to work when more than one version is loaded in a given application domain.</span></span>  
  
 <span data-ttu-id="82aab-158">類型或方法標記為之後<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>，它可以升級到<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>。</span><span class="sxs-lookup"><span data-stu-id="82aab-158">After a type or method is marked as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>, it can be upgraded to <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>.</span></span> <span data-ttu-id="82aab-159">不過，它無法降級至<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>。</span><span class="sxs-lookup"><span data-stu-id="82aab-159">However, it cannot be downgraded to <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>.</span></span>  
  
<a name="Exchange"></a>   
### <a name="exchange-type-compatibility"></a><span data-ttu-id="82aab-160">Exchange 類型相容性</span><span class="sxs-lookup"><span data-stu-id="82aab-160">Exchange Type Compatibility</span></span>  
 <span data-ttu-id="82aab-161">標記類型為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange?displayProperty=nameWithType>提供更強的版本相容性保證比<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>，且應該會套用到最穩定的所有類型。</span><span class="sxs-lookup"><span data-stu-id="82aab-161">Marking a type as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange?displayProperty=nameWithType> provides a stronger version compatibility guarantee than <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>, and should be applied to the most stable of all types.</span></span> <span data-ttu-id="82aab-162">這些類型被要用於跨同時時間 （任何版本的 CLR） 或任何版本的元件或應用程式中的所有元件界限獨立建置的元件和空間 （跨處理序，在某一個處理序中的跨 CLR 之間的交換跨應用程式定義域中一個 CLR）。</span><span class="sxs-lookup"><span data-stu-id="82aab-162">These types are intended to be used for interchange between independently built components across all component boundaries in both time (any version of the CLR or any version of a component or application) and space (cross-process, cross-CLR in one process, cross-application domain in one CLR).</span></span> <span data-ttu-id="82aab-163">如果一項重大變更對交換類型，就無法載入類型的多個版本來修正問題。</span><span class="sxs-lookup"><span data-stu-id="82aab-163">If a breaking change is made to an exchange type, it is impossible to fix the issue by loading multiple versions of the type.</span></span>  
  
 <span data-ttu-id="82aab-164">問題非常嚴重 （如嚴重的安全性問題） 或遭破壞的可能性極低 （亦即，如果已經是行為已損毀的程式碼可能不理論上花費相依性上以隨機方式） 時，才應該變更交換類型。</span><span class="sxs-lookup"><span data-stu-id="82aab-164">Exchange types should be changed only when a problem is very serious (such as a severe security issue) or the probability of breakage is very low (that is, if the behavior was already broken in a random way that code could not have conceivably taken a dependency on).</span></span> <span data-ttu-id="82aab-165">您可以對交換類型的下列幾種變更：</span><span class="sxs-lookup"><span data-stu-id="82aab-165">You can make the following kinds of changes to an exchange type:</span></span>  
  
-   <span data-ttu-id="82aab-166">加入新的介面定義的繼承。</span><span class="sxs-lookup"><span data-stu-id="82aab-166">Add inheritance of new interface definitions.</span></span>  
  
-   <span data-ttu-id="82aab-167">加入新的私用方法的實作新繼承的介面定義的方法。</span><span class="sxs-lookup"><span data-stu-id="82aab-167">Add new private methods that implement the methods of newly inherited interface definitions.</span></span>  
  
-   <span data-ttu-id="82aab-168">加入新的靜態欄位。</span><span class="sxs-lookup"><span data-stu-id="82aab-168">Add new static fields.</span></span>  
  
-   <span data-ttu-id="82aab-169">加入新的靜態方法。</span><span class="sxs-lookup"><span data-stu-id="82aab-169">Add new static methods.</span></span>  
  
-   <span data-ttu-id="82aab-170">加入新的非虛擬執行個體方法。</span><span class="sxs-lookup"><span data-stu-id="82aab-170">Add new non-virtual instance methods.</span></span>  
  
 <span data-ttu-id="82aab-171">下列會被視為重大變更，而且不允許的基本型別：</span><span class="sxs-lookup"><span data-stu-id="82aab-171">The following are considered breaking changes and are not allowed for primitive types:</span></span>  
  
-   <span data-ttu-id="82aab-172">變更序列化格式。</span><span class="sxs-lookup"><span data-stu-id="82aab-172">Changing serialization formats.</span></span> <span data-ttu-id="82aab-173">需要版本相容序列化。</span><span class="sxs-lookup"><span data-stu-id="82aab-173">Version-tolerant serialization is required.</span></span>  
  
-   <span data-ttu-id="82aab-174">加入或移除私用執行個體欄位。</span><span class="sxs-lookup"><span data-stu-id="82aab-174">Adding or removing private instance fields.</span></span> <span data-ttu-id="82aab-175">這個風險變更類型的序列化格式，並中斷用戶端程式碼使用反映。</span><span class="sxs-lookup"><span data-stu-id="82aab-175">This risks changing the serialization format of the type and breaking client code that uses reflection.</span></span>  
  
-   <span data-ttu-id="82aab-176">變更類型的可序列化能力。</span><span class="sxs-lookup"><span data-stu-id="82aab-176">Changing the serializability of a type.</span></span> <span data-ttu-id="82aab-177">非可序列化的型別不能成為可序列化，反之亦然。</span><span class="sxs-lookup"><span data-stu-id="82aab-177">A non-serializable type may not be made serializable, and vice versa.</span></span>  
  
-   <span data-ttu-id="82aab-178">擲回不同的例外狀況，從方法。</span><span class="sxs-lookup"><span data-stu-id="82aab-178">Throwing different exceptions from a method.</span></span>  
  
-   <span data-ttu-id="82aab-179">除非成員定義引發這種可能性，並清楚指出用戶端應該如何處理未知的值，請變更方法的傳回值的範圍。</span><span class="sxs-lookup"><span data-stu-id="82aab-179">Changing the range of a method's return values, unless the member definition raises this possibility and clearly indicates how clients should handle unknown values.</span></span>  
  
-   <span data-ttu-id="82aab-180">修正大部分的 bug。</span><span class="sxs-lookup"><span data-stu-id="82aab-180">Fixing most bugs.</span></span> <span data-ttu-id="82aab-181">類型的取用者將會依賴現有的行為。</span><span class="sxs-lookup"><span data-stu-id="82aab-181">Consumers of the type will rely on the existing behavior.</span></span>  
  
 <span data-ttu-id="82aab-182">一個元件之後, 類型或成員會標示<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>保證，就無法變更為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>或<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>。</span><span class="sxs-lookup"><span data-stu-id="82aab-182">After a component, type, or member is marked with the <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange> guarantee, it cannot be changed to either <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> or <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>.</span></span>  
  
 <span data-ttu-id="82aab-183">一般而言，交換類型是基本類型 (例如<xref:System.Int32>和<xref:System.String>.NET Framework 中) 和介面 (例如<xref:System.Collections.Generic.IList%601>， <xref:System.Collections.Generic.IEnumerable%601>，和<xref:System.IComparable%601>)，常用於公用介面。</span><span class="sxs-lookup"><span data-stu-id="82aab-183">Typically, exchange types are the basic types (such as <xref:System.Int32> and <xref:System.String> in the .NET Framework) and interfaces (such as <xref:System.Collections.Generic.IList%601>, <xref:System.Collections.Generic.IEnumerable%601>, and <xref:System.IComparable%601>) that are commonly used in public interfaces.</span></span>  
  
 <span data-ttu-id="82aab-184">交換類型可能會公開也標記著其他型別<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>相容性。</span><span class="sxs-lookup"><span data-stu-id="82aab-184">Exchange types may publicly expose only other types that are also marked with <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange> compatibility.</span></span> <span data-ttu-id="82aab-185">此外，exchange 類型不能相依於容易發生變更的 Windows Api 的行為。</span><span class="sxs-lookup"><span data-stu-id="82aab-185">In addition, exchange types cannot depend on the behavior of Windows APIs that are prone to change.</span></span>  
  
## <a name="component-guarantees-a-summary"></a><span data-ttu-id="82aab-186">元件保證： 摘要</span><span class="sxs-lookup"><span data-stu-id="82aab-186">Component Guarantees: A Summary</span></span>  
 <span data-ttu-id="82aab-187">下表指出元件的特性和使用方式如何影響其相容性保證。</span><span class="sxs-lookup"><span data-stu-id="82aab-187">The following table indicates how a component's characteristics and usage affect its compatibility guarantee.</span></span>  
  
|<span data-ttu-id="82aab-188">元件的特性</span><span class="sxs-lookup"><span data-stu-id="82aab-188">Component characteristics</span></span>|<span data-ttu-id="82aab-189">Exchange</span><span class="sxs-lookup"><span data-stu-id="82aab-189">Exchange</span></span>|<span data-ttu-id="82aab-190">穩定</span><span class="sxs-lookup"><span data-stu-id="82aab-190">Stable</span></span>|<span data-ttu-id="82aab-191">-並存</span><span class="sxs-lookup"><span data-stu-id="82aab-191">Side-by-Side</span></span>|<span data-ttu-id="82aab-192">無</span><span class="sxs-lookup"><span data-stu-id="82aab-192">None</span></span>|  
|-------------------------------|--------------|------------|--------------------|----------|  
|<span data-ttu-id="82aab-193">可以是在元件之間的介面中該版本單獨使用。</span><span class="sxs-lookup"><span data-stu-id="82aab-193">Can be used in interfaces between components that version independently.</span></span>|<span data-ttu-id="82aab-194">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-194">Y</span></span>|<span data-ttu-id="82aab-195">N</span><span class="sxs-lookup"><span data-stu-id="82aab-195">N</span></span>|<span data-ttu-id="82aab-196">N</span><span class="sxs-lookup"><span data-stu-id="82aab-196">N</span></span>|<span data-ttu-id="82aab-197">N</span><span class="sxs-lookup"><span data-stu-id="82aab-197">N</span></span>|  
|<span data-ttu-id="82aab-198">可以是 （公開） 的組件的版本單獨使用。</span><span class="sxs-lookup"><span data-stu-id="82aab-198">Can be used (privately) by an assembly that versions independently.</span></span>|<span data-ttu-id="82aab-199">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-199">Y</span></span>|<span data-ttu-id="82aab-200">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-200">Y</span></span>|<span data-ttu-id="82aab-201">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-201">Y</span></span>|<span data-ttu-id="82aab-202">N</span><span class="sxs-lookup"><span data-stu-id="82aab-202">N</span></span>|  
|<span data-ttu-id="82aab-203">單一應用程式定義域中可以有多個版本。</span><span class="sxs-lookup"><span data-stu-id="82aab-203">Can have multiple versions in a single application domain.</span></span>|<span data-ttu-id="82aab-204">N</span><span class="sxs-lookup"><span data-stu-id="82aab-204">N</span></span>|<span data-ttu-id="82aab-205">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-205">Y</span></span>|<span data-ttu-id="82aab-206">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-206">Y</span></span>|<span data-ttu-id="82aab-207">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-207">Y</span></span>|  
|<span data-ttu-id="82aab-208">可以進行重大變更</span><span class="sxs-lookup"><span data-stu-id="82aab-208">Can make breaking changes</span></span>|<span data-ttu-id="82aab-209">N</span><span class="sxs-lookup"><span data-stu-id="82aab-209">N</span></span>|<span data-ttu-id="82aab-210">N</span><span class="sxs-lookup"><span data-stu-id="82aab-210">N</span></span>|<span data-ttu-id="82aab-211">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-211">Y</span></span>|<span data-ttu-id="82aab-212">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-212">Y</span></span>|  
|<span data-ttu-id="82aab-213">測試以確定可以同時載入多個版本的組件。</span><span class="sxs-lookup"><span data-stu-id="82aab-213">Tested to make certain multiple versions of the assembly can be loaded together.</span></span>|<span data-ttu-id="82aab-214">N</span><span class="sxs-lookup"><span data-stu-id="82aab-214">N</span></span>|<span data-ttu-id="82aab-215">N</span><span class="sxs-lookup"><span data-stu-id="82aab-215">N</span></span>|<span data-ttu-id="82aab-216">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-216">Y</span></span>|<span data-ttu-id="82aab-217">N</span><span class="sxs-lookup"><span data-stu-id="82aab-217">N</span></span>|  
|<span data-ttu-id="82aab-218">可以在位置進行重大變更。</span><span class="sxs-lookup"><span data-stu-id="82aab-218">Can make breaking changes in place.</span></span>|<span data-ttu-id="82aab-219">N</span><span class="sxs-lookup"><span data-stu-id="82aab-219">N</span></span>|<span data-ttu-id="82aab-220">N</span><span class="sxs-lookup"><span data-stu-id="82aab-220">N</span></span>|<span data-ttu-id="82aab-221">N</span><span class="sxs-lookup"><span data-stu-id="82aab-221">N</span></span>|<span data-ttu-id="82aab-222">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-222">Y</span></span>|  
|<span data-ttu-id="82aab-223">可以讓非常安全非中斷服務的位置中的變更。</span><span class="sxs-lookup"><span data-stu-id="82aab-223">Can make very safe non-breaking servicing changes in place.</span></span>|<span data-ttu-id="82aab-224">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-224">Y</span></span>|<span data-ttu-id="82aab-225">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-225">Y</span></span>|<span data-ttu-id="82aab-226">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-226">Y</span></span>|<span data-ttu-id="82aab-227">Y</span><span class="sxs-lookup"><span data-stu-id="82aab-227">Y</span></span>|  
  
## <a name="applying-the-attribute"></a><span data-ttu-id="82aab-228">套用屬性</span><span class="sxs-lookup"><span data-stu-id="82aab-228">Applying the Attribute</span></span>  
 <span data-ttu-id="82aab-229">您可以套用<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute>組件、 類型或類型成員。</span><span class="sxs-lookup"><span data-stu-id="82aab-229">You can apply the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute> to an assembly, a type, or a type member.</span></span> <span data-ttu-id="82aab-230">它的應用程式是階層式。</span><span class="sxs-lookup"><span data-stu-id="82aab-230">Its application is hierarchical.</span></span> <span data-ttu-id="82aab-231">也就是說，根據預設，保證所定義<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A>組件層級屬性的屬性定義的所有類型的保證組件，這些型別中的所有成員。</span><span class="sxs-lookup"><span data-stu-id="82aab-231">That is, by default, the guarantee defined by the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A> property of the attribute at the assembly level defines the guarantee of all types in the assembly and all members in those types.</span></span> <span data-ttu-id="82aab-232">同樣地，如果保證套用至型別，依預設它也適用於每個型別的成員。</span><span class="sxs-lookup"><span data-stu-id="82aab-232">Similarly, if the guarantee is applied to the type, by default it also applies to each member of the type.</span></span>  
  
 <span data-ttu-id="82aab-233">此繼承的保證，可以藉由套用覆寫<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute>至個別的類型和類型成員。</span><span class="sxs-lookup"><span data-stu-id="82aab-233">This inherited guarantee can be overridden by applying the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute> to individual types and type members.</span></span> <span data-ttu-id="82aab-234">不過，覆寫預設的保證只會減弱保證;它們無法進行加強。</span><span class="sxs-lookup"><span data-stu-id="82aab-234">However, guarantees that override the default can only weaken the guarantee; they cannot strengthen it.</span></span> <span data-ttu-id="82aab-235">例如，如果組件標記為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>保證，其型別和成員有不相容性保證，且會套用至型別或成員的組件中的任何其他保證會被忽略。</span><span class="sxs-lookup"><span data-stu-id="82aab-235">For example, if an assembly is marked with the <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None> guarantee, its types and members have no compatibility guarantee, and any other guarantee that is applied to types or members in the assembly is ignored.</span></span>  
  
## <a name="testing-the-guarantee"></a><span data-ttu-id="82aab-236">測試就可以保證</span><span class="sxs-lookup"><span data-stu-id="82aab-236">Testing the Guarantee</span></span>  
 <span data-ttu-id="82aab-237"><xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A>屬性傳回的成員<xref:System.Runtime.Versioning.ComponentGuaranteesOptions>列舉型別，會以標示<xref:System.FlagsAttribute>屬性。</span><span class="sxs-lookup"><span data-stu-id="82aab-237">The <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A> property returns a member of the <xref:System.Runtime.Versioning.ComponentGuaranteesOptions> enumeration, which is marked with the <xref:System.FlagsAttribute> attribute.</span></span> <span data-ttu-id="82aab-238">這表示您應該針對您所感興趣遮罩離開可能無法辨識的旗標的旗標測試。</span><span class="sxs-lookup"><span data-stu-id="82aab-238">This means that you should test for the flag that you are interested in by masking away potentially unknown flags.</span></span> <span data-ttu-id="82aab-239">例如，下列範例會測試是否為型別標示為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>。</span><span class="sxs-lookup"><span data-stu-id="82aab-239">For example, the following example tests whether a type is marked as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>.</span></span>  
  
 [!code-csharp[System.Runtime.Versioning.ComponentGuaranteesAttribute.Class#1](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.runtime.versioning.componentguaranteesattribute.class/cs/apply1.cs#1)]
 [!code-vb[System.Runtime.Versioning.ComponentGuaranteesAttribute.Class#1](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.runtime.versioning.componentguaranteesattribute.class/vb/apply1.vb#1)]  
  
 <span data-ttu-id="82aab-240">下列範例會測試是否為型別標示為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>或<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>。</span><span class="sxs-lookup"><span data-stu-id="82aab-240">The following example tests whether a type is marked as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> or <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>.</span></span>  
  
 [!code-csharp[System.Runtime.Versioning.ComponentGuaranteesAttribute.Class#2](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.runtime.versioning.componentguaranteesattribute.class/cs/apply1.cs#2)]
 [!code-vb[System.Runtime.Versioning.ComponentGuaranteesAttribute.Class#2](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.runtime.versioning.componentguaranteesattribute.class/vb/apply1.vb#2)]  
  
 <span data-ttu-id="82aab-241">下列範例測試排除的型別標示為<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None>(也就是說，兩者皆非<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable>也<xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>)。</span><span class="sxs-lookup"><span data-stu-id="82aab-241">The following example tests wither a type is marked as <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.None> (that is, neither <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Stable> nor <xref:System.Runtime.Versioning.ComponentGuaranteesOptions.Exchange>).</span></span>  
  
 [!code-csharp[System.Runtime.Versioning.ComponentGuaranteesAttribute.Class#3](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.runtime.versioning.componentguaranteesattribute.class/cs/apply1.cs#3)]
 [!code-vb[System.Runtime.Versioning.ComponentGuaranteesAttribute.Class#3](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.runtime.versioning.componentguaranteesattribute.class/vb/apply1.vb#3)]  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Runtime.Versioning.ComponentGuaranteesOptions" />
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public ComponentGuaranteesAttribute (System.Runtime.Versioning.ComponentGuaranteesOptions guarantees);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(valuetype System.Runtime.Versioning.ComponentGuaranteesOptions guarantees) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Runtime.Versioning.ComponentGuaranteesAttribute.#ctor(System.Runtime.Versioning.ComponentGuaranteesOptions)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (guarantees As ComponentGuaranteesOptions)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; ComponentGuaranteesAttribute(System::Runtime::Versioning::ComponentGuaranteesOptions guarantees);" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime.Extensions</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="guarantees" Type="System.Runtime.Versioning.ComponentGuaranteesOptions" />
      </Parameters>
      <Docs>
        <param name="guarantees"><span data-ttu-id="82aab-242">一個列舉值，指定多版相容性保障層級。</span><span class="sxs-lookup"><span data-stu-id="82aab-242">One of the enumeration values that specifies the level of compatibility that is guaranteed across multiple versions.</span></span></param>
        <summary><span data-ttu-id="82aab-243">使用表示程式庫、型別或成員之多版相容性保障層級的值，初始化 <see cref="T:System.Runtime.Versioning.ComponentGuaranteesAttribute" /> 類別的新執行個體。</span><span class="sxs-lookup"><span data-stu-id="82aab-243">Initializes a new instance of the <see cref="T:System.Runtime.Versioning.ComponentGuaranteesAttribute" /> class with a value that indicates a library, type, or member's guaranteed level of compatibility across multiple versions.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="82aab-244">當<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute>類別具現化，值`guarantees`參數指派給<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="82aab-244">When the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute> class is instantiated, the value of the `guarantees` parameter is assigned to the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A> property.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Guarantees">
      <MemberSignature Language="C#" Value="public System.Runtime.Versioning.ComponentGuaranteesOptions Guarantees { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Runtime.Versioning.ComponentGuaranteesOptions Guarantees" />
      <MemberSignature Language="DocId" Value="P:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property Guarantees As ComponentGuaranteesOptions" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Runtime::Versioning::ComponentGuaranteesOptions Guarantees { System::Runtime::Versioning::ComponentGuaranteesOptions get(); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime.Extensions</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Runtime.Versioning.ComponentGuaranteesOptions</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="82aab-245">取得值，該值表示應用在多個版本中的程式庫、型別或型別成員之相容性保障層級。</span><span class="sxs-lookup"><span data-stu-id="82aab-245">Gets a value that indicates the guaranteed level of compatibility of a library, type, or type member that spans multiple versions.</span></span></summary>
        <value><span data-ttu-id="82aab-246">一個列舉值，指定多版相容性保障層級。</span><span class="sxs-lookup"><span data-stu-id="82aab-246">One of the enumeration values that specifies the level of compatibility that is guaranteed across multiple versions.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="82aab-247">值<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A>屬性會對應至`guarantees`參數<xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.%23ctor%2A>建構函式。</span><span class="sxs-lookup"><span data-stu-id="82aab-247">The value of the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.Guarantees%2A> property corresponds to the `guarantees` parameter of the <xref:System.Runtime.Versioning.ComponentGuaranteesAttribute.%23ctor%2A> constructor.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>