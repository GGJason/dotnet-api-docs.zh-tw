<Type Name="SessionStateStoreProviderBase" FullName="System.Web.SessionState.SessionStateStoreProviderBase">
  <Metadata><Meta Name="ms.openlocfilehash" Value="1841436a6479c0b1c33c26794c28ee86cb78e78f" /><Meta Name="ms.sourcegitcommit" Value="16d2d159872fd213cae4b8f371d7ae9c8b027c89" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-TW" /><Meta Name="ms.lasthandoff" Value="11/17/2018" /><Meta Name="ms.locfileid" Value="51936011" /></Metadata><TypeSignature Language="C#" Value="public abstract class SessionStateStoreProviderBase : System.Configuration.Provider.ProviderBase" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi abstract beforefieldinit SessionStateStoreProviderBase extends System.Configuration.Provider.ProviderBase" />
  <TypeSignature Language="DocId" Value="T:System.Web.SessionState.SessionStateStoreProviderBase" />
  <TypeSignature Language="VB.NET" Value="Public MustInherit Class SessionStateStoreProviderBase&#xA;Inherits ProviderBase" />
  <TypeSignature Language="C++ CLI" Value="public ref class SessionStateStoreProviderBase abstract : System::Configuration::Provider::ProviderBase" />
  <TypeSignature Language="F#" Value="type SessionStateStoreProviderBase = class&#xA;    inherit ProviderBase" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Configuration.Provider.ProviderBase</BaseTypeName>
  </Base>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="9a6b1-101">為資料存放區定義工作階段狀態提供者的所需成員。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-101">Defines the required members of a session-state provider for a data store.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-102">ASP.NET 工作階段狀態讀寫工作階段狀態資料存放區來回的工作階段資料存放區提供者。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-102">ASP.NET session state reads and writes session data from and to a data store using a session-state store provider.</span></span> <span data-ttu-id="9a6b1-103">工作階段狀態存放區提供者是繼承的類別<xref:System.Web.SessionState.SessionStateStoreProviderBase>抽象類別並覆寫其成員與實作特殊的資料存放區。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-103">A session-state store provider is a class that inherits the <xref:System.Web.SessionState.SessionStateStoreProviderBase> abstract class and overrides its members with implementations specific to the data store.</span></span> <span data-ttu-id="9a6b1-104">工作階段狀態存放區提供者會呼叫<xref:System.Web.SessionState.SessionStateModule>在 ASP.NET 網頁與資料存放區的儲存體通訊的處理與擷取工作階段變數與相關的工作階段資訊，例如逾時值期間的類別。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-104">The session-state store provider is called by the <xref:System.Web.SessionState.SessionStateModule> class during the processing of an ASP.NET page to communicate with the data store for the storage and retrieval of session variables and related session information such as the time-out value.</span></span>  
  
 <span data-ttu-id="9a6b1-105">每個 ASP.NET 應用程式內的工作階段資料會分別儲存每個<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-105">Session data within each ASP.NET application is stored separately for each <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> property.</span></span> <span data-ttu-id="9a6b1-106">ASP.NET 應用程式不會共用工作階段資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-106">ASP.NET applications do not share session data.</span></span>  
  
 <span data-ttu-id="9a6b1-107">您可以指定自訂<xref:System.Web.SessionState.SessionStateStoreProviderBase>藉由設定 ASP.NET 應用程式的實作`mode`屬性`sessionState`組態項目<xref:System.Web.SessionState.SessionStateMode.Custom>而`customProvider`屬性的自訂提供者中，名稱為本主題中範例所示。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-107">You can specify a custom <xref:System.Web.SessionState.SessionStateStoreProviderBase> implementation for an ASP.NET application by setting the `mode` attribute of the `sessionState` configuration element to <xref:System.Web.SessionState.SessionStateMode.Custom> and the `customProvider` attribute to the name of the custom provider, as shown in the example for this topic.</span></span>  
  
## <a name="locking-session-store-data"></a><span data-ttu-id="9a6b1-108">鎖定工作階段存放區資料</span><span class="sxs-lookup"><span data-stu-id="9a6b1-108">Locking Session Store Data</span></span>  
 <span data-ttu-id="9a6b1-109">因為 ASP.NET 應用程式是多執行緒來支援並行要求的回應，就可以並行要求可能會嘗試存取相同的工作階段資訊。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-109">Because ASP.NET applications are multithreaded to support responding to concurrent requests, it is possible that concurrent requests might attempt to access the same session information.</span></span> <span data-ttu-id="9a6b1-110">假設所有框架組中的多個框架存取相同的應用程式的位置。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-110">Consider a scenario where multiple frames in a frameset all access the same application.</span></span> <span data-ttu-id="9a6b1-111">在框架組中的每個畫面格的個別要求可以在不同的執行緒上同時在 Web 伺服器上執行。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-111">The separate requests for each frame in the frameset can be executed on the Web server concurrently on different threads.</span></span> <span data-ttu-id="9a6b1-112">如果框架中的每個來源的 ASP.NET 頁面存取工作階段狀態變數，您可能有多個執行緒同時存取工作階段存放區。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-112">If the ASP.NET pages for each frame source access session-state variables, then you could have multiple threads accessing the session store concurrently.</span></span>  
  
 <span data-ttu-id="9a6b1-113">若要避免在工作階段存放區和非預期的工作階段狀態行為的資料衝突<xref:System.Web.SessionState.SessionStateModule>和<xref:System.Web.SessionState.SessionStateStoreProviderBase>類別包含了鎖定功能，以獨佔方式鎖定特定的工作階段期間的 工作階段存放區項目在 ASP.NET 網頁執行。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-113">To avoid data collisions at the session store and unexpected session-state behavior, the <xref:System.Web.SessionState.SessionStateModule> and <xref:System.Web.SessionState.SessionStateStoreProviderBase> classes include lock functionality that exclusively locks the session store item for a particular session for the duration of the execution of an ASP.NET page.</span></span> <span data-ttu-id="9a6b1-114">請注意，即使<xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性標示為`ReadOnly`，可能可以將寫入至工作階段存放區中，以便從存放區的資料仍可能會得到等候唯讀工作階段的要求鎖定的資料會在相同的應用程式中的其他 ASP.NET 網頁釋出。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-114">Note that even if the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is marked as `ReadOnly`, other ASP.NET pages in the same application might be able to write to the session store, so a request for read-only session data from the store might still end up waiting for locked data to be freed.</span></span>  
  
 <span data-ttu-id="9a6b1-115">鎖定設定的工作階段存放區資料的要求，在呼叫開頭<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-115">A lock is set on session-store data at the beginning of the request, in the call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method.</span></span> <span data-ttu-id="9a6b1-116">在呼叫期間完成要求時，會釋放鎖定<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-116">When the request completes, the lock is released during the call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A> method.</span></span>  
  
 <span data-ttu-id="9a6b1-117">如果<xref:System.Web.SessionState.SessionStateModule>物件在呼叫期間發生鎖定的工作階段資料<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>或<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法，它會重新要求工作階段資料在半秒的時間間隔之前或釋放鎖定的時間量，已鎖定工作階段資料的值超過<xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-117">If the <xref:System.Web.SessionState.SessionStateModule> object encounters locked session data during the call to either the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> or the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method, it will re-request the session data at half-second intervals until either the lock is released or the amount of time that the session data has been locked exceeds the value of the <xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A> property.</span></span> <span data-ttu-id="9a6b1-118">如果超過執行逾時，<xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>釋放工作階段存放區資料，並在該時間要求工作階段存放區資料的方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-118">If the execution time out is exceeded, the <xref:System.Web.SessionState.SessionStateModule> object will call the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method to free the session-store data and request the session-store data at that time.</span></span>  
  
 <span data-ttu-id="9a6b1-119">因為鎖定工作階段存放區的資料可能會先呼叫釋放<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法的呼叫之前在個別執行緒上<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A>目前回應的方法，可能會嘗試設定和發行工作階段狀態存放區的資料已發行並由另一個工作階段修改。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-119">Because locked session-store data might have been freed by a call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method on a separate thread before the call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A> method for the current response, an attempt could be made to set and release session-state store data that has already been released and modified by another session.</span></span> <span data-ttu-id="9a6b1-120">若要避免此情況下，<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>和<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法會傳回鎖定識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-120">To avoid this situation, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> and <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> methods return a lock identifier.</span></span> <span data-ttu-id="9a6b1-121">此鎖定識別項必須包含每個要求來修改鎖定的工作階段存放區的資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-121">This lock identifier must be included with each request to modify locked session-store data.</span></span> <span data-ttu-id="9a6b1-122">工作階段存放區資料，才能修改資料存放區中的鎖定識別碼符合所提供的鎖定識別碼<xref:System.Web.SessionState.SessionStateModule>。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-122">Session-store data is modified only if the lock identifier in the data store matches the lock identifier supplied by the <xref:System.Web.SessionState.SessionStateModule>.</span></span>  
  
## <a name="deleting-expired-session-store-data"></a><span data-ttu-id="9a6b1-123">刪除過期的工作階段存放區資料</span><span class="sxs-lookup"><span data-stu-id="9a6b1-123">Deleting Expired Session Store Data</span></span>  
 <span data-ttu-id="9a6b1-124">當<xref:System.Web.SessionState.HttpSessionState.Abandon%2A>方法會針對特定的工作階段呼叫，該工作階段資料會刪除從資料存放區使用<xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A>方法; 否則資料會留在工作階段資料存放區伺服器的未來要求工作階段。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-124">When the <xref:System.Web.SessionState.HttpSessionState.Abandon%2A> method is called for a particular session, the data for that session is deleted from the data store using the <xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A> method; otherwise, the data will remain in the session data store to server future requests for the session.</span></span> <span data-ttu-id="9a6b1-125">最多是<xref:System.Web.SessionState.SessionStateStoreProviderBase>刪除過期的工作階段資料的實作。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-125">It is up to the <xref:System.Web.SessionState.SessionStateStoreProviderBase> implementation to delete expired session data.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-126">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-126">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 <span data-ttu-id="9a6b1-127">下列程式碼範例顯示已設定為使用自訂的工作階段狀態存放區提供者的 ASP.NET 應用程式的 Web.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-127">The following code example shows the Web.config file for an ASP.NET application that is configured to use a custom session-state store provider.</span></span>  
  
```  
<configuration>  
  <connectionStrings>  
    <add name="OdbcSessionServices" connectionString="DSN=SessionState;" />  
  </connectionStrings>  
  
  <system.web>  
    <sessionState   
      mode="Custom"  
      customProvider="OdbcSessionProvider">  
      <providers>  
        <add name="OdbcSessionProvider"  
             type="Samples.AspNet.Session.OdbcSessionStateStore"  
             connectionStringName="OdbcSessionServices" />  
      </providers>  
    </sessionState>  
  </system.web>  
</configuration>  
```  
  
 ]]></format>
    </remarks>
    <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-128">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-128">ASP.NET Session State Overview</span></span></related>
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="protected SessionStateStoreProviderBase ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.#ctor" />
      <MemberSignature Language="VB.NET" Value="Protected Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; SessionStateStoreProviderBase();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="9a6b1-129">初始化 <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> 類別的新執行個體。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-129">Initializes a new instance of the <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> class.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-130">您不需要實作繼承的類別的建構函式<xref:System.Web.SessionState.SessionStateStoreProviderBase>抽象類別。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-130">You are not required to implement a constructor for a class that inherits the <xref:System.Web.SessionState.SessionStateStoreProviderBase> abstract class.</span></span> <span data-ttu-id="9a6b1-131">初始化值<xref:System.Web.SessionState.SessionStateStoreProviderBase>實作會傳遞至<xref:System.Configuration.Provider.ProviderBase.Initialize%2A>方法實作。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-131">Initialization values for a <xref:System.Web.SessionState.SessionStateStoreProviderBase> implementation are passed to the <xref:System.Configuration.Provider.ProviderBase.Initialize%2A> method implementation.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-132">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-132">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-133">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-133">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="CreateNewStoreData">
      <MemberSignature Language="C#" Value="public abstract System.Web.SessionState.SessionStateStoreData CreateNewStoreData (System.Web.HttpContext context, int timeout);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Web.SessionState.SessionStateStoreData CreateNewStoreData(class System.Web.HttpContext context, int32 timeout) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData(System.Web.HttpContext,System.Int32)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function CreateNewStoreData (context As HttpContext, timeout As Integer) As SessionStateStoreData" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract System::Web::SessionState::SessionStateStoreData ^ CreateNewStoreData(System::Web::HttpContext ^ context, int timeout);" />
      <MemberSignature Language="F#" Value="abstract member CreateNewStoreData : System.Web.HttpContext * int -&gt; System.Web.SessionState.SessionStateStoreData" Usage="sessionStateStoreProviderBase.CreateNewStoreData (context, timeout)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.SessionState.SessionStateStoreData</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="timeout" Type="System.Int32" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-134">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-134">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="timeout"><span data-ttu-id="9a6b1-135">新 <see cref="P:System.Web.SessionState.HttpSessionState.Timeout" /> 的工作階段狀態 <see cref="T:System.Web.SessionState.SessionStateStoreData" /> 值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-135">The session-state <see cref="P:System.Web.SessionState.HttpSessionState.Timeout" /> value for the new <see cref="T:System.Web.SessionState.SessionStateStoreData" />.</span></span></param>
        <summary><span data-ttu-id="9a6b1-136">建立要用於目前要求的新 <see cref="T:System.Web.SessionState.SessionStateStoreData" /> 物件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-136">Creates a new <see cref="T:System.Web.SessionState.SessionStateStoreData" /> object to be used for the current request.</span></span></summary>
        <returns><span data-ttu-id="9a6b1-137">目前要求的新 <see cref="T:System.Web.SessionState.SessionStateStoreData" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-137">A new <see cref="T:System.Web.SessionState.SessionStateStoreData" /> for the current request.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-138"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A>ASP.NET 網頁，在要求開始方法期間<xref:System.Web.HttpApplication.AcquireRequestState>事件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-138">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A> method at the beginning of a request for an ASP.NET page, during the <xref:System.Web.HttpApplication.AcquireRequestState> event.</span></span> <span data-ttu-id="9a6b1-139"><xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A>會呼叫方法：</span><span class="sxs-lookup"><span data-stu-id="9a6b1-139">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A> method is called if:</span></span>  
  
-   <span data-ttu-id="9a6b1-140">內送的要求有沒有工作階段識別碼，或</span><span class="sxs-lookup"><span data-stu-id="9a6b1-140">the incoming request has no session ID, or</span></span>  
  
-   <span data-ttu-id="9a6b1-141">連入要求具有工作階段識別碼，但資料存放區中找不到工作階段。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-141">the incoming request has a session ID, but the session is not found in the data store.</span></span>  
  
 <span data-ttu-id="9a6b1-142"><xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A>方法建立新<xref:System.Web.SessionState.SessionStateStoreData>物件，使用空<xref:System.Web.SessionState.ISessionStateItemCollection>物件<xref:System.Web.HttpStaticObjectsCollection>集合，並指定`timeout`值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-142">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A> method creates a new <xref:System.Web.SessionState.SessionStateStoreData> object with an empty <xref:System.Web.SessionState.ISessionStateItemCollection> object, an <xref:System.Web.HttpStaticObjectsCollection> collection, and the specified `timeout` value.</span></span> <span data-ttu-id="9a6b1-143"><xref:System.Web.HttpStaticObjectsCollection>集合的 ASP.NET 應用程式可以使用擷取<xref:System.Web.SessionState.SessionStateUtility.GetSessionStaticObjects%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-143">The <xref:System.Web.HttpStaticObjectsCollection> collection for the ASP.NET application can be retrieved using the <xref:System.Web.SessionState.SessionStateUtility.GetSessionStaticObjects%2A> method.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-144">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-144">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-145">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-145">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="CreateUninitializedItem">
      <MemberSignature Language="C#" Value="public abstract void CreateUninitializedItem (System.Web.HttpContext context, string id, int timeout);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void CreateUninitializedItem(class System.Web.HttpContext context, string id, int32 timeout) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem(System.Web.HttpContext,System.String,System.Int32)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub CreateUninitializedItem (context As HttpContext, id As String, timeout As Integer)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void CreateUninitializedItem(System::Web::HttpContext ^ context, System::String ^ id, int timeout);" />
      <MemberSignature Language="F#" Value="abstract member CreateUninitializedItem : System.Web.HttpContext * string * int -&gt; unit" Usage="sessionStateStoreProviderBase.CreateUninitializedItem (context, id, timeout)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
        <Parameter Name="timeout" Type="System.Int32" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-146">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-146">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-147">目前要求的 <see cref="P:System.Web.SessionState.HttpSessionState.SessionID" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-147">The <see cref="P:System.Web.SessionState.HttpSessionState.SessionID" /> for the current request.</span></span></param>
        <param name="timeout"><span data-ttu-id="9a6b1-148">目前要求的工作階段 <see cref="P:System.Web.SessionState.HttpSessionState.Timeout" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-148">The session <see cref="P:System.Web.SessionState.HttpSessionState.Timeout" /> for the current request.</span></span></param>
        <summary><span data-ttu-id="9a6b1-149">將新的工作階段狀態項目加入資料存放區。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-149">Adds a new session-state item to the data store.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-150"><xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A>方法搭配工作階段時`cookieless`並`regenerateExpiredSessionId`屬性都`true`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-150">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A> method is used with sessions when the `cookieless` and `regenerateExpiredSessionId` attributes are both `true`.</span></span> <span data-ttu-id="9a6b1-151">擁有`regenerateExpiredSessionId attribute`設定為`true`會導致<xref:System.Web.SessionState.SessionStateModule>物件來產生新<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>時已過期的值<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>遇到值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-151">Having the `regenerateExpiredSessionId attribute` set to `true` causes the <xref:System.Web.SessionState.SessionStateModule> object to generate a new <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value when an expired <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value is encountered.</span></span>  
  
 <span data-ttu-id="9a6b1-152">產生新的程序<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值會要求瀏覽器重新導向至包含新產生的 URL<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-152">The process of generating a new <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value requires redirecting the browser to a URL that contains the newly generated <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value.</span></span> <span data-ttu-id="9a6b1-153"><xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A>方法呼叫期間包含 已過期的初始要求<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-153">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A> method is called during the initial request that contains an expired <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value.</span></span> <span data-ttu-id="9a6b1-154">在後<xref:System.Web.SessionState.SessionStateModule>物件取得新<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值來取代過期的值，它會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A>方法將未初始化的項目加入至工作階段狀態資料存放區。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-154">After the <xref:System.Web.SessionState.SessionStateModule> object acquires a new <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value to replace the expired value, it calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A> method to add an uninitialized entry to the session-state data store.</span></span> <span data-ttu-id="9a6b1-155">瀏覽器重新導向至包含新產生的 URL<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-155">The browser is then redirected to the URL containing the newly generated <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value.</span></span> <span data-ttu-id="9a6b1-156">確保重新導向的要求，其中包含新產生的工作階段資料存放區中未初始化的項目是否存在<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值不要被誤認為要求過期的工作階段，相反地，即視為新的工作階段。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-156">The existence of the uninitialized entry in the session data store ensures that the redirected request that includes the newly generated <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value is not mistaken for a request for an expired session and is, instead, treated as a new session.</span></span>  
  
 <span data-ttu-id="9a6b1-157">工作階段資料存放區中未初始化的項目是與新產生相關聯<xref:System.Web.SessionState.HttpSessionState.SessionID%2A>值，並只包含預設值，包括到期日期和時間值，對應為`actionFlags`參數<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>和<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-157">The uninitialized entry in the session data store is associated with the newly generated <xref:System.Web.SessionState.HttpSessionState.SessionID%2A> value and contains only default values, including an expiration date and time and a value that corresponds to the `actionFlags` parameter of the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> and <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> methods.</span></span> <span data-ttu-id="9a6b1-158">工作階段狀態存放區中未初始化的項目應該包含`actionFlags`值等於<xref:System.Web.SessionState.SessionStateActions.InitializeItem>列舉值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-158">The uninitialized entry in the session-state store should include an `actionFlags` value equal to the <xref:System.Web.SessionState.SessionStateActions.InitializeItem> enumeration value.</span></span> <span data-ttu-id="9a6b1-159">這個值會傳遞至<xref:System.Web.SessionState.SessionStateModule>物件所<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>並<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法，並通知<xref:System.Web.SessionState.SessionStateModule>物件，目前的工作階段是新但未初始化的工作階段。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-159">This value is passed to the <xref:System.Web.SessionState.SessionStateModule> object by the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> and <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> methods, and informs the <xref:System.Web.SessionState.SessionStateModule> object that the current session is a new but uninitialized session.</span></span> <span data-ttu-id="9a6b1-160"><xref:System.Web.SessionState.SessionStateModule>物件接著會在初始化新的工作階段，並引發`Session_OnStart`事件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-160">The <xref:System.Web.SessionState.SessionStateModule> object will then initialize the new session and raise the `Session_OnStart` event.</span></span>  
  
 <span data-ttu-id="9a6b1-161">如需無 cookie 工作階段的詳細資訊，請參閱<xref:System.Web.SessionState.HttpSessionState.IsCookieless%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-161">For more information about cookieless sessions, see the <xref:System.Web.SessionState.HttpSessionState.IsCookieless%2A> property.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-162">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-162">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-163">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-163">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="Dispose">
      <MemberSignature Language="C#" Value="public abstract void Dispose ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Dispose() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.Dispose" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub Dispose ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void Dispose();" />
      <MemberSignature Language="F#" Value="abstract member Dispose : unit -&gt; unit" Usage="sessionStateStoreProviderBase.Dispose " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="9a6b1-164">釋放 <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> 實作所使用的所有資源。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-164">Releases all resources used by the <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> implementation.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-165"><xref:System.Web.SessionState.SessionStateStoreProviderBase.Dispose%2A?displayProperty=nameWithType>方法時，會呼叫<xref:System.Web.SessionState.SessionStateModule.Dispose%2A?displayProperty=nameWithType>方法會執行在應用程式定義域關閉。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-165">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.Dispose%2A?displayProperty=nameWithType> method is called when the <xref:System.Web.SessionState.SessionStateModule.Dispose%2A?displayProperty=nameWithType> method executes at the closing of the application domain.</span></span> <span data-ttu-id="9a6b1-166">繼承的類別<xref:System.Web.SessionState.SessionStateStoreProviderBase>類別可以使用這個方法，以釋出不再使用中的任何資源。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-166">Classes that inherit the <xref:System.Web.SessionState.SessionStateStoreProviderBase> class can use this method to free any resources no longer in use.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-167">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-167">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-168">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-168">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="EndRequest">
      <MemberSignature Language="C#" Value="public abstract void EndRequest (System.Web.HttpContext context);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void EndRequest(class System.Web.HttpContext context) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.EndRequest(System.Web.HttpContext)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub EndRequest (context As HttpContext)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void EndRequest(System::Web::HttpContext ^ context);" />
      <MemberSignature Language="F#" Value="abstract member EndRequest : System.Web.HttpContext -&gt; unit" Usage="sessionStateStoreProviderBase.EndRequest context" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-169">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-169">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <summary><span data-ttu-id="9a6b1-170"><see cref="T:System.Web.SessionState.SessionStateModule" /> 物件在要求結束時呼叫。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-170">Called by the <see cref="T:System.Web.SessionState.SessionStateModule" /> object at the end of a request.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-171"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.EndRequest%2A>ASP.NET 網頁，在要求結束方法期間<xref:System.Web.HttpApplication.EndRequest>事件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-171">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.EndRequest%2A> method at the end of a request for an ASP.NET page, during the <xref:System.Web.HttpApplication.EndRequest> event.</span></span> <span data-ttu-id="9a6b1-172">您可以使用<xref:System.Web.SessionState.SessionStateStoreProviderBase.EndRequest%2A>方法來執行您的工作階段狀態存放區提供者所需的任何個別要求清除作業。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-172">You can use the <xref:System.Web.SessionState.SessionStateStoreProviderBase.EndRequest%2A> method to perform any per-request cleanup required by your session-state store provider.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-173">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-173">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-174">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-174">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="GetItem">
      <MemberSignature Language="C#" Value="public abstract System.Web.SessionState.SessionStateStoreData GetItem (System.Web.HttpContext context, string id, out bool locked, out TimeSpan lockAge, out object lockId, out System.Web.SessionState.SessionStateActions actions);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Web.SessionState.SessionStateStoreData GetItem(class System.Web.HttpContext context, string id, [out] bool&amp; locked, [out] valuetype System.TimeSpan&amp; lockAge, [out] object&amp; lockId, [out] valuetype System.Web.SessionState.SessionStateActions&amp; actions) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.GetItem(System.Web.HttpContext,System.String,System.Boolean@,System.TimeSpan@,System.Object@,System.Web.SessionState.SessionStateActions@)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function GetItem (context As HttpContext, id As String, ByRef locked As Boolean, ByRef lockAge As TimeSpan, ByRef lockId As Object, ByRef actions As SessionStateActions) As SessionStateStoreData" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract System::Web::SessionState::SessionStateStoreData ^ GetItem(System::Web::HttpContext ^ context, System::String ^ id, [Runtime::InteropServices::Out] bool % locked, [Runtime::InteropServices::Out] TimeSpan % lockAge, [Runtime::InteropServices::Out] System::Object ^ % lockId, [Runtime::InteropServices::Out] System::Web::SessionState::SessionStateActions % actions);" />
      <MemberSignature Language="F#" Value="abstract member GetItem : System.Web.HttpContext * string *  *  *  *  -&gt; System.Web.SessionState.SessionStateStoreData" Usage="sessionStateStoreProviderBase.GetItem (context, id, locked, lockAge, lockId, actions)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.SessionState.SessionStateStoreData</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
        <Parameter Name="locked" Type="System.Boolean" RefType="out" />
        <Parameter Name="lockAge" Type="System.TimeSpan" RefType="out" />
        <Parameter Name="lockId" Type="System.Object" RefType="out" />
        <Parameter Name="actions" Type="System.Web.SessionState.SessionStateActions" RefType="out" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-175">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-175">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-176">目前要求的 <see cref="P:System.Web.SessionState.HttpSessionState.SessionID" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-176">The <see cref="P:System.Web.SessionState.HttpSessionState.SessionID" /> for the current request.</span></span></param>
        <param name="locked"><span data-ttu-id="9a6b1-177">這個方法傳回時，包含布林值 (Boolean)，如果要求的工作階段項目鎖定在工作階段資料存放區，則該值會設定為 <see langword="true" />，否則會設定為 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-177">When this method returns, contains a Boolean value that is set to <see langword="true" /> if the requested session item is locked at the session data store; otherwise, <see langword="false" />.</span></span></param>
        <param name="lockAge"><span data-ttu-id="9a6b1-178">這個方法傳回時，包含 <see cref="T:System.TimeSpan" /> 物件，該物件設定為工作階段資料存放區中已鎖定項目的時間長度。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-178">When this method returns, contains a <see cref="T:System.TimeSpan" /> object that is set to the amount of time that an item in the session data store has been locked.</span></span></param>
        <param name="lockId"><span data-ttu-id="9a6b1-179">這個方法傳回時，包含設定為目前要求之鎖定識別項的物件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-179">When this method returns, contains an object that is set to the lock identifier for the current request.</span></span> <span data-ttu-id="9a6b1-180">如需鎖定識別項的詳細資訊，請參閱 <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> 類別摘要中的＜鎖定工作階段存放區資料＞。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-180">For details on the lock identifier, see "Locking Session-Store Data" in the <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> class summary.</span></span></param>
        <param name="actions"><span data-ttu-id="9a6b1-181">這個方法傳回時，包含其中一個 <see cref="T:System.Web.SessionState.SessionStateActions" /> 值，指出目前的工作階段是否為未初始化之無 Cookie 的工作階段。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-181">When this method returns, contains one of the <see cref="T:System.Web.SessionState.SessionStateActions" /> values, indicating whether the current session is an uninitialized, cookieless session.</span></span></param>
        <summary><span data-ttu-id="9a6b1-182">從工作階段資料存放區傳回唯讀工作階段狀態資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-182">Returns read-only session-state data from the session data store.</span></span></summary>
        <returns><span data-ttu-id="9a6b1-183">填入工作階段資料存放區之工作階段值和資訊的 <see cref="T:System.Web.SessionState.SessionStateStoreData" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-183">A <see cref="T:System.Web.SessionState.SessionStateStoreData" /> populated with session values and information from the session data store.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-184"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>開頭的要求方法期間<xref:System.Web.HttpApplication.AcquireRequestState>事件，當<xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性設為`ReadOnly`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-184">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method at the beginning of a request, during the <xref:System.Web.HttpApplication.AcquireRequestState> event, when the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is set to `ReadOnly`.</span></span> <span data-ttu-id="9a6b1-185">如果<xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性設定為`true`，則<xref:System.Web.SessionState.SessionStateModule>物件會改為呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-185">If the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is set to `true`, the <xref:System.Web.SessionState.SessionStateModule> object instead calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method.</span></span>  
  
 <span data-ttu-id="9a6b1-186"><xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法會傳回<xref:System.Web.SessionState.SessionStateStoreData>物件填入資料存放區的工作階段資訊和更新的工作階段資料的到期日。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-186">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method returns a <xref:System.Web.SessionState.SessionStateStoreData> object populated with session information from the data store and updates the expiration date of the session data.</span></span> <span data-ttu-id="9a6b1-187">如果沒有工作階段項目資料在資料存放區中，找到<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法會設定`locked``out`參數來`false`，並傳回`null`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-187">If no session-item data is found at the data store, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method sets the `locked` `out` parameter to `false` and returns `null`.</span></span> <span data-ttu-id="9a6b1-188">這會導致<xref:System.Web.SessionState.SessionStateModule>物件呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A>方法，以在資料存放區中建立新的工作階段項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-188">This causes the <xref:System.Web.SessionState.SessionStateModule> object to call the <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A> method to create a new session item in the data store.</span></span>  
  
 <span data-ttu-id="9a6b1-189">如果工作階段項目資料位於資料存放區，但資料已被鎖定，<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法會設定`locked``out`參數來`true`，設定`lockAge``out`目前日期和時間減去日期的參數與項目已鎖定時的時間 （這擷取自資料存放區），設定`lockId``out`之鎖定識別項的參數擷取自資料存放區，並傳回`null`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-189">If session-item data is found at the data store but the data is locked, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method sets the `locked` `out` parameter to `true`, sets the `lockAge` `out` parameter to the current date and time minus the date and time when the item was locked (which is retrieved from the data store), sets the `lockId` `out` parameter to the lock identifier retrieved from the data store, and returns `null`.</span></span> <span data-ttu-id="9a6b1-190">這會導致<xref:System.Web.SessionState.SessionStateModule>物件呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>再次半秒的間隔之後嘗試擷取工作階段項目資訊的方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-190">This causes the <xref:System.Web.SessionState.SessionStateModule> object to call the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method again after a half-second interval to attempt to retrieve the session-item information.</span></span>  
  
 <span data-ttu-id="9a6b1-191">如果值的`lockAge``out`參數設為超過<xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A>的值，則<xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法，以清除工作階段項目資料，然後呼叫上的鎖定<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法一次。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-191">If the value that the `lockAge` `out` parameter is set to exceed the <xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A> value, then the <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method to clear the lock on the session-item data, and then calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method again.</span></span>  
  
 <span data-ttu-id="9a6b1-192">`actionFlags`參數使用時都`cookieless`並`regenerateExpiredSessionId`屬性設定為`true`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-192">The `actionFlags` parameter is used when both the `cookieless` and `regenerateExpiredSessionId` attributes are set to `true`.</span></span> <span data-ttu-id="9a6b1-193">`actionFlags`值設定為<xref:System.Web.SessionState.SessionStateActions.InitializeItem>表示工作階段資料存放區中的項目是新的工作階段需要初始化。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-193">An `actionFlags` value set to <xref:System.Web.SessionState.SessionStateActions.InitializeItem> indicates that the entry in the session data store is a new session that requires initialization.</span></span> <span data-ttu-id="9a6b1-194">未初始化的工作階段資料存放區中的項目藉由呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-194">Uninitialized entries in the session data store are created by a call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A> method.</span></span> <span data-ttu-id="9a6b1-195">如果工作階段資料存放區中的項目不是未初始化的項目，`actionFlags`參數會設定為零。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-195">If the item from the session data store is not an uninitialized item, the `actionFlags` parameter will be set to zero.</span></span>  
  
 <span data-ttu-id="9a6b1-196">支援無 cookie 工作階段的自訂工作階段狀態存放區實作者應該設定`actionFlags``out`參數的值傳回從工作階段資料存放區，為目前的項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-196">Custom session-state store implementers that support cookieless sessions should set the `actionFlags` `out` parameter to the value returned from the session data store for the current item.</span></span> <span data-ttu-id="9a6b1-197">如果`actionFlags`要求的工作階段存放區的參數值項目等於<xref:System.Web.SessionState.SessionStateActions.InitializeItem>列舉值，則<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法應該設定為零之後設定, 資料存放區中的值`actionFlags``out`參數。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-197">If the `actionFlags` parameter value for the requested session-store item equals the <xref:System.Web.SessionState.SessionStateActions.InitializeItem> enumeration value, then the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method should set the value in the data store to zero after setting the `actionFlags` `out` parameter.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-198">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-198">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-199">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-199">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="GetItemExclusive">
      <MemberSignature Language="C#" Value="public abstract System.Web.SessionState.SessionStateStoreData GetItemExclusive (System.Web.HttpContext context, string id, out bool locked, out TimeSpan lockAge, out object lockId, out System.Web.SessionState.SessionStateActions actions);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance class System.Web.SessionState.SessionStateStoreData GetItemExclusive(class System.Web.HttpContext context, string id, [out] bool&amp; locked, [out] valuetype System.TimeSpan&amp; lockAge, [out] object&amp; lockId, [out] valuetype System.Web.SessionState.SessionStateActions&amp; actions) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive(System.Web.HttpContext,System.String,System.Boolean@,System.TimeSpan@,System.Object@,System.Web.SessionState.SessionStateActions@)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function GetItemExclusive (context As HttpContext, id As String, ByRef locked As Boolean, ByRef lockAge As TimeSpan, ByRef lockId As Object, ByRef actions As SessionStateActions) As SessionStateStoreData" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract System::Web::SessionState::SessionStateStoreData ^ GetItemExclusive(System::Web::HttpContext ^ context, System::String ^ id, [Runtime::InteropServices::Out] bool % locked, [Runtime::InteropServices::Out] TimeSpan % lockAge, [Runtime::InteropServices::Out] System::Object ^ % lockId, [Runtime::InteropServices::Out] System::Web::SessionState::SessionStateActions % actions);" />
      <MemberSignature Language="F#" Value="abstract member GetItemExclusive : System.Web.HttpContext * string *  *  *  *  -&gt; System.Web.SessionState.SessionStateStoreData" Usage="sessionStateStoreProviderBase.GetItemExclusive (context, id, locked, lockAge, lockId, actions)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.SessionState.SessionStateStoreData</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
        <Parameter Name="locked" Type="System.Boolean" RefType="out" />
        <Parameter Name="lockAge" Type="System.TimeSpan" RefType="out" />
        <Parameter Name="lockId" Type="System.Object" RefType="out" />
        <Parameter Name="actions" Type="System.Web.SessionState.SessionStateActions" RefType="out" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-200">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-200">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-201">目前要求的 <see cref="P:System.Web.SessionState.HttpSessionState.SessionID" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-201">The <see cref="P:System.Web.SessionState.HttpSessionState.SessionID" /> for the current request.</span></span></param>
        <param name="locked"><span data-ttu-id="9a6b1-202">這個方法傳回時，包含布林值，如果已成功取得鎖定，則該值會設定為 <see langword="true" />，否則會設定為 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-202">When this method returns, contains a Boolean value that is set to <see langword="true" /> if a lock is successfully obtained; otherwise, <see langword="false" />.</span></span></param>
        <param name="lockAge"><span data-ttu-id="9a6b1-203">這個方法傳回時，包含 <see cref="T:System.TimeSpan" /> 物件，該物件設定為工作階段資料存放區中已鎖定項目的時間長度。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-203">When this method returns, contains a <see cref="T:System.TimeSpan" /> object that is set to the amount of time that an item in the session data store has been locked.</span></span></param>
        <param name="lockId"><span data-ttu-id="9a6b1-204">這個方法傳回時，包含設定為目前要求之鎖定識別項的物件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-204">When this method returns, contains an object that is set to the lock identifier for the current request.</span></span> <span data-ttu-id="9a6b1-205">如需鎖定識別項的詳細資訊，請參閱 <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> 類別摘要中的＜鎖定工作階段存放區資料＞。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-205">For details on the lock identifier, see "Locking Session-Store Data" in the <see cref="T:System.Web.SessionState.SessionStateStoreProviderBase" /> class summary.</span></span></param>
        <param name="actions"><span data-ttu-id="9a6b1-206">這個方法傳回時，包含其中一個 <see cref="T:System.Web.SessionState.SessionStateActions" /> 值，指出目前的工作階段是否為未初始化之無 Cookie 的工作階段。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-206">When this method returns, contains one of the <see cref="T:System.Web.SessionState.SessionStateActions" /> values, indicating whether the current session is an uninitialized, cookieless session.</span></span></param>
        <summary><span data-ttu-id="9a6b1-207">從工作階段資料存放區傳回唯讀工作階段狀態資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-207">Returns read-only session-state data from the session data store.</span></span></summary>
        <returns><span data-ttu-id="9a6b1-208">填入工作階段資料存放區之工作階段值和資訊的 <see cref="T:System.Web.SessionState.SessionStateStoreData" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-208">A <see cref="T:System.Web.SessionState.SessionStateStoreData" /> populated with session values and information from the session data store.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-209"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>開頭的要求方法期間<xref:System.Web.HttpApplication.AcquireRequestState>事件，當<xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性設為`true`，這是預設值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-209">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method at the beginning of a request, during the <xref:System.Web.HttpApplication.AcquireRequestState> event, when the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is set to `true`, which is the default.</span></span> <span data-ttu-id="9a6b1-210">如果<xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性設定為`ReadOnly`，則<xref:System.Web.SessionState.SessionStateModule>物件會改為呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-210">If the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is set to `ReadOnly`, the <xref:System.Web.SessionState.SessionStateModule> object instead calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItem%2A> method.</span></span>  
  
 <span data-ttu-id="9a6b1-211"><xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法會傳回<xref:System.Web.SessionState.SessionStateStoreData>更新到期日的已儲存的資料，填入資料存放區中，工作階段資訊的物件，並要求期間會鎖定資料存放區的工作階段項目資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-211">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method returns a <xref:System.Web.SessionState.SessionStateStoreData> object populated with session information from the data store, updates the expiration date of the stored data, and locks the session-item data at the data store for the duration of the request.</span></span> <span data-ttu-id="9a6b1-212">如果沒有工作階段項目資料在資料存放區中，找到<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法會設定`locked``out`參數來`false`，並傳回`null`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-212">If no session-item data is found at the data store, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method sets the `locked` `out` parameter to `false` and returns `null`.</span></span> <span data-ttu-id="9a6b1-213">這會導致<xref:System.Web.SessionState.SessionStateModule>物件呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A>方法，以在資料存放區中建立新的工作階段項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-213">This causes the <xref:System.Web.SessionState.SessionStateModule> object to call the <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData%2A> method to create a new session item in the data store.</span></span> <span data-ttu-id="9a6b1-214">如果工作階段項目資料位於資料存放區，但資料已被鎖定，<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法會設定`locked``out`參數來`true`，設定`lockAge``out`目前日期和時間減去日期的參數與項目已鎖定時的時間 （這擷取自資料存放區），設定`lockId``out`之鎖定識別項的參數擷取自資料存放區，並傳回`null`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-214">If session-item data is found at the data store but the data is locked, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method sets the `locked` `out` parameter to `true`, sets the `lockAge` `out` parameter to the current date and time minus the date and time when the item was locked (which is retrieved from the data store), sets the `lockId` `out` parameter to the lock identifier retrieved from the data store, and returns `null`.</span></span> <span data-ttu-id="9a6b1-215">這會導致<xref:System.Web.SessionState.SessionStateModule>物件呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>再次半秒的間隔之後嘗試擷取工作階段項目資訊，並將資料上取得鎖定的方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-215">This causes the <xref:System.Web.SessionState.SessionStateModule> object to call the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method again after a half-second interval to attempt to retrieve the session-item information and obtain a lock on the data.</span></span> <span data-ttu-id="9a6b1-216">如果此值， `lockAge` `out`參數設為超過<xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A>值，則<xref:System.Web.SessionState.SessionStateModule>呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法，以清除工作階段項目資料，然後呼叫上的鎖定<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法一次。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-216">If the value that the `lockAge` `out` parameter is set to exceeds the <xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A> value, then the <xref:System.Web.SessionState.SessionStateModule> calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method to clear the lock on the session-item data, and then calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method again.</span></span>  
  
 <span data-ttu-id="9a6b1-217">`actionFlags`會使用參數時`cookieless`並`regenerateExpiredSessionId`屬性都設為`true`。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-217">The `actionFlags` parameter is used when the `cookieless` and `regenerateExpiredSessionId` attributes are both set to `true`.</span></span> <span data-ttu-id="9a6b1-218">`actionFlags`值設定為<xref:System.Web.SessionState.SessionStateActions.InitializeItem>表示工作階段資料存放區中的項目是新的工作階段需要初始化。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-218">An `actionFlags` value set to <xref:System.Web.SessionState.SessionStateActions.InitializeItem> indicates that the entry in the session data store is a new session that requires initialization.</span></span> <span data-ttu-id="9a6b1-219">未初始化的工作階段資料存放區中的項目藉由呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-219">Uninitialized entries in the session data store are created by a call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.CreateUninitializedItem%2A> method.</span></span> <span data-ttu-id="9a6b1-220">如果工作階段資料存放區中的項目不是未初始化的項目，`actionFlags`參數會設定為零。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-220">If the item from the session data store is not an uninitialized item, the `actionFlags` parameter will be set to zero.</span></span>  
  
 <span data-ttu-id="9a6b1-221">支援無 cookie 工作階段的自訂工作階段狀態存放區實作者應該設定`actionFlags``out`參數的值傳回從工作階段資料存放區，為目前的項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-221">Custom session-state store implementers that support cookieless sessions should set the `actionFlags` `out` parameter to the value returned from the session data store for the current item.</span></span> <span data-ttu-id="9a6b1-222">如果`actionFlags`要求的工作階段存放區的參數值項目等於<xref:System.Web.SessionState.SessionStateActions.InitializeItem>列舉值，則<xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A>方法應該設定為零之後設定, 資料存放區中的值`actionFlags``out`參數。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-222">If the `actionFlags` parameter value for the requested session-store item equals the <xref:System.Web.SessionState.SessionStateActions.InitializeItem> enumeration value, then the <xref:System.Web.SessionState.SessionStateStoreProviderBase.GetItemExclusive%2A> method should set the value in the data store to zero after setting the `actionFlags` `out` parameter.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-223">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-223">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-224">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-224">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="InitializeRequest">
      <MemberSignature Language="C#" Value="public abstract void InitializeRequest (System.Web.HttpContext context);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void InitializeRequest(class System.Web.HttpContext context) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.InitializeRequest(System.Web.HttpContext)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub InitializeRequest (context As HttpContext)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void InitializeRequest(System::Web::HttpContext ^ context);" />
      <MemberSignature Language="F#" Value="abstract member InitializeRequest : System.Web.HttpContext -&gt; unit" Usage="sessionStateStoreProviderBase.InitializeRequest context" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-225">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-225">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <summary><span data-ttu-id="9a6b1-226"><see cref="T:System.Web.SessionState.SessionStateModule" /> 物件為每一要求初始化呼叫。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-226">Called by the <see cref="T:System.Web.SessionState.SessionStateModule" /> object for per-request initialization.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-227"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.InitializeRequest%2A>方法，然後再呼叫其他<xref:System.Web.SessionState.SessionStateStoreProviderBase>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-227">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.InitializeRequest%2A> method before calling any other <xref:System.Web.SessionState.SessionStateStoreProviderBase> method.</span></span> <span data-ttu-id="9a6b1-228">您可以使用<xref:System.Web.SessionState.SessionStateStoreProviderBase.InitializeRequest%2A>方法，以執行您的工作階段狀態存放區提供者所需的任何個別的要求初始化。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-228">You can use the <xref:System.Web.SessionState.SessionStateStoreProviderBase.InitializeRequest%2A> method to perform any per-request initialization required by your session-state store provider.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-229">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-229">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-230">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-230">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ReleaseItemExclusive">
      <MemberSignature Language="C#" Value="public abstract void ReleaseItemExclusive (System.Web.HttpContext context, string id, object lockId);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void ReleaseItemExclusive(class System.Web.HttpContext context, string id, object lockId) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive(System.Web.HttpContext,System.String,System.Object)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub ReleaseItemExclusive (context As HttpContext, id As String, lockId As Object)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void ReleaseItemExclusive(System::Web::HttpContext ^ context, System::String ^ id, System::Object ^ lockId);" />
      <MemberSignature Language="F#" Value="abstract member ReleaseItemExclusive : System.Web.HttpContext * string * obj -&gt; unit" Usage="sessionStateStoreProviderBase.ReleaseItemExclusive (context, id, lockId)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
        <Parameter Name="lockId" Type="System.Object" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-231">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-231">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-232">目前要求的工作階段識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-232">The session identifier for the current request.</span></span></param>
        <param name="lockId"><span data-ttu-id="9a6b1-233">目前要求的鎖定識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-233">The lock identifier for the current request.</span></span></param>
        <summary><span data-ttu-id="9a6b1-234">釋放工作階段資料存放區中項目的鎖定。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-234">Releases a lock on an item in the session data store.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-235"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法來更新到期日，並釋出鎖定工作階段資料存放區中的項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-235">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method to update the expiration date and release a lock on an item in the session data store.</span></span> <span data-ttu-id="9a6b1-236">在要求中，結尾處呼叫期間<xref:System.Web.HttpApplication.ReleaseRequestState>事件，如果工作階段的值為不變。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-236">It is called at the end of a request, during the <xref:System.Web.HttpApplication.ReleaseRequestState> event, if session values are unchanged.</span></span> <span data-ttu-id="9a6b1-237">如果工作階段值已經被修改，<xref:System.Web.SessionState.SessionStateModule>物件會改為呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-237">If session values have been modified, the <xref:System.Web.SessionState.SessionStateModule> object instead calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A> method.</span></span>  
  
 <span data-ttu-id="9a6b1-238"><xref:System.Web.SessionState.SessionStateModule>物件也會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法時的鎖定工作階段資料存放區中的項目已超過<xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A>值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-238">The <xref:System.Web.SessionState.SessionStateModule> object also calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method when a lock on an item in the session data store has exceeded the <xref:System.Web.Configuration.HttpRuntimeSection.ExecutionTimeout%2A> value.</span></span> <span data-ttu-id="9a6b1-239">如需有關鎖定的詳細資訊和鎖定識別項的詳細資料，請參閱 < 鎖定工作階段存放區資料 」 中<xref:System.Web.SessionState.SessionStateStoreProviderBase>類別概觀。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-239">For more information about locking and details about the lock identifier, see "Locking Session-Store Data" in the <xref:System.Web.SessionState.SessionStateStoreProviderBase> class overview.</span></span>  
  
 <span data-ttu-id="9a6b1-240"><xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法只會移除鎖定目前的應用程式符合提供的工作階段的工作階段資料存放區中的項目`id`和`lockId`值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-240">The <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method only removes the lock from an item in the session data store for the current application that matches the supplied session `id` and `lockId` values.</span></span> <span data-ttu-id="9a6b1-241">如果`lockId`不相符的資料存放區中的一個<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>方法不做任何動作。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-241">If the `lockId` does not match the one in the data store, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method does nothing.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-242">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-242">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-243">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-243">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="RemoveItem">
      <MemberSignature Language="C#" Value="public abstract void RemoveItem (System.Web.HttpContext context, string id, object lockId, System.Web.SessionState.SessionStateStoreData item);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void RemoveItem(class System.Web.HttpContext context, string id, object lockId, class System.Web.SessionState.SessionStateStoreData item) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem(System.Web.HttpContext,System.String,System.Object,System.Web.SessionState.SessionStateStoreData)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub RemoveItem (context As HttpContext, id As String, lockId As Object, item As SessionStateStoreData)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void RemoveItem(System::Web::HttpContext ^ context, System::String ^ id, System::Object ^ lockId, System::Web::SessionState::SessionStateStoreData ^ item);" />
      <MemberSignature Language="F#" Value="abstract member RemoveItem : System.Web.HttpContext * string * obj * System.Web.SessionState.SessionStateStoreData -&gt; unit" Usage="sessionStateStoreProviderBase.RemoveItem (context, id, lockId, item)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
        <Parameter Name="lockId" Type="System.Object" />
        <Parameter Name="item" Type="System.Web.SessionState.SessionStateStoreData" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-244">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-244">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-245">目前要求的工作階段識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-245">The session identifier for the current request.</span></span></param>
        <param name="lockId"><span data-ttu-id="9a6b1-246">目前要求的鎖定識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-246">The lock identifier for the current request.</span></span></param>
        <param name="item"><span data-ttu-id="9a6b1-247"><see cref="T:System.Web.SessionState.SessionStateStoreData" />，表示要從資料存放區中刪除的項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-247">The <see cref="T:System.Web.SessionState.SessionStateStoreData" /> that represents the item to delete from the data store.</span></span></param>
        <summary><span data-ttu-id="9a6b1-248">刪除工作階段資料存放區的項目資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-248">Deletes item data from the session data store.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-249"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A>結尾的要求，方法期間<xref:System.Web.HttpApplication.ReleaseRequestState>事件，以從工作階段資料存放區刪除工作階段項目的資料，如果<xref:System.Web.SessionState.HttpSessionState.Abandon%2A>已呼叫方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-249">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A> method at the end of a request, during the <xref:System.Web.HttpApplication.ReleaseRequestState> event, to delete the data for a session item from the session data store if the <xref:System.Web.SessionState.HttpSessionState.Abandon%2A> method has been called.</span></span> <span data-ttu-id="9a6b1-250">只有目前的應用程式符合提供的工作階段的工作階段資料`id`和`lockId`刪除值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-250">Only session data for the current application that matches the supplied session `id` and `lockId` values is deleted.</span></span> <span data-ttu-id="9a6b1-251">如需有關鎖定的詳細資訊和鎖定識別項的詳細資料，請參閱 < 鎖定工作階段存放區資料 」 中<xref:System.Web.SessionState.SessionStateStoreProviderBase>類別概觀。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-251">For more information about locking and details about the lock identifier, see "Locking Session-Store Data" in the <xref:System.Web.SessionState.SessionStateStoreProviderBase> class overview.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-252">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-252">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-253">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-253">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="ResetItemTimeout">
      <MemberSignature Language="C#" Value="public abstract void ResetItemTimeout (System.Web.HttpContext context, string id);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void ResetItemTimeout(class System.Web.HttpContext context, string id) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.ResetItemTimeout(System.Web.HttpContext,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub ResetItemTimeout (context As HttpContext, id As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void ResetItemTimeout(System::Web::HttpContext ^ context, System::String ^ id);" />
      <MemberSignature Language="F#" Value="abstract member ResetItemTimeout : System.Web.HttpContext * string -&gt; unit" Usage="sessionStateStoreProviderBase.ResetItemTimeout (context, id)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-254">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-254">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-255">目前要求的工作階段識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-255">The session identifier for the current request.</span></span></param>
        <summary><span data-ttu-id="9a6b1-256">更新工作階段資料存放區中項目的到期日與時間。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-256">Updates the expiration date and time of an item in the session data store.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-257"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.ResetItemTimeout%2A>方法來更新至目前的日期和時間加上工作階段的工作階段的時間與到期日<xref:System.Web.SessionState.HttpSessionState.Timeout%2A>值可能是：</span><span class="sxs-lookup"><span data-stu-id="9a6b1-257">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ResetItemTimeout%2A> method to update the expiration date and time for a session to the current date and time plus the session <xref:System.Web.SessionState.HttpSessionState.Timeout%2A> value when either:</span></span>  
  
-   <span data-ttu-id="9a6b1-258"><xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性是`true`，或</span><span class="sxs-lookup"><span data-stu-id="9a6b1-258">the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is `true`, or</span></span>  
  
-   <span data-ttu-id="9a6b1-259">要求並不會引發<xref:System.Web.HttpApplication.AcquireRequestState>和<xref:System.Web.HttpApplication.ReleaseRequestState>因為發生錯誤的事件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-259">the request did not raise the <xref:System.Web.HttpApplication.AcquireRequestState> and <xref:System.Web.HttpApplication.ReleaseRequestState> events due to an error.</span></span>  
  
 <span data-ttu-id="9a6b1-260">如果在要求 ASP.NET 網頁和<xref:System.Web.Configuration.PagesSection.EnableSessionState%2A>屬性設定為`false`，則<xref:System.Web.SessionState.SessionStateStoreProviderBase.ResetItemTimeout%2A>仍會呼叫方法來更新到期的日期和時間的工作階段資料存放區中的資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-260">If an ASP.NET page is requested and the <xref:System.Web.Configuration.PagesSection.EnableSessionState%2A> attribute is set to `false`, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ResetItemTimeout%2A> method is still called to update the expiration date and time of the data in the session data store.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-261">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-261">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-262">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-262">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SetAndReleaseItemExclusive">
      <MemberSignature Language="C#" Value="public abstract void SetAndReleaseItemExclusive (System.Web.HttpContext context, string id, System.Web.SessionState.SessionStateStoreData item, object lockId, bool newItem);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void SetAndReleaseItemExclusive(class System.Web.HttpContext context, string id, class System.Web.SessionState.SessionStateStoreData item, object lockId, bool newItem) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive(System.Web.HttpContext,System.String,System.Web.SessionState.SessionStateStoreData,System.Object,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Sub SetAndReleaseItemExclusive (context As HttpContext, id As String, item As SessionStateStoreData, lockId As Object, newItem As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract void SetAndReleaseItemExclusive(System::Web::HttpContext ^ context, System::String ^ id, System::Web::SessionState::SessionStateStoreData ^ item, System::Object ^ lockId, bool newItem);" />
      <MemberSignature Language="F#" Value="abstract member SetAndReleaseItemExclusive : System.Web.HttpContext * string * System.Web.SessionState.SessionStateStoreData * obj * bool -&gt; unit" Usage="sessionStateStoreProviderBase.SetAndReleaseItemExclusive (context, id, item, lockId, newItem)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="System.Web.HttpContext" />
        <Parameter Name="id" Type="System.String" />
        <Parameter Name="item" Type="System.Web.SessionState.SessionStateStoreData" />
        <Parameter Name="lockId" Type="System.Object" />
        <Parameter Name="newItem" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="9a6b1-263">目前要求的 <see cref="T:System.Web.HttpContext" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-263">The <see cref="T:System.Web.HttpContext" /> for the current request.</span></span></param>
        <param name="id"><span data-ttu-id="9a6b1-264">目前要求的工作階段識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-264">The session identifier for the current request.</span></span></param>
        <param name="item"><span data-ttu-id="9a6b1-265"><see cref="T:System.Web.SessionState.SessionStateStoreData" /> 物件，包含要儲存的目前工作階段值。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-265">The <see cref="T:System.Web.SessionState.SessionStateStoreData" /> object that contains the current session values to be stored.</span></span></param>
        <param name="lockId"><span data-ttu-id="9a6b1-266">目前要求的鎖定識別項。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-266">The lock identifier for the current request.</span></span></param>
        <param name="newItem"><span data-ttu-id="9a6b1-267"><see langword="true" /> 表示將工作階段項目識別為新項目，<see langword="false" /> 則表示將工作階段項目識別為現有項目。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-267"><see langword="true" /> to identify the session item as a new item; <see langword="false" /> to identify the session item as an existing item.</span></span></param>
        <summary><span data-ttu-id="9a6b1-268">使用目前要求的值，更新工作階段狀態資料存放區中的工作階段項目資訊，並清除對資料的鎖定。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-268">Updates the session-item information in the session-state data store with values from the current request, and clears the lock on the data.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-269"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A>結尾的要求，方法期間<xref:System.Web.HttpApplication.ReleaseRequestState>事件，將目前的工作階段項目資訊插入至資料存放區，或使用目前的值，更新資料存放區中的現有工作階段項目資訊若要更新的項目上的到期時間，並釋放的鎖定資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-269">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A> method at the end of a request, during the <xref:System.Web.HttpApplication.ReleaseRequestState> event, to insert current session-item information into the data store or update existing session-item information in the data store with current values, to update the expiration time on the item, and to release the lock on the data.</span></span> <span data-ttu-id="9a6b1-270">只有目前的應用程式符合提供的工作階段的工作階段資料`id`和`lockId`值更新。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-270">Only session data for the current application that matches the supplied session `id` and `lockId` values is updated.</span></span> <span data-ttu-id="9a6b1-271">如需有關鎖定的詳細資訊，請參閱 < 鎖定工作階段存放區資料 > 中<xref:System.Web.SessionState.SessionStateStoreProviderBase>類別概觀。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-271">For more information about locking, see "Locking Session Store Data" in the <xref:System.Web.SessionState.SessionStateStoreProviderBase> class overview.</span></span>  
  
 <span data-ttu-id="9a6b1-272">如果目前要求的工作階段值尚未經過修改，<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A>不會呼叫方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-272">If the session values for the current request have not been modified, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A> method is not called.</span></span> <span data-ttu-id="9a6b1-273">相反地，<xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A>呼叫方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-273">Instead, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.ReleaseItemExclusive%2A> method is called.</span></span>  
  
 <span data-ttu-id="9a6b1-274">如果<xref:System.Web.SessionState.HttpSessionState.Abandon%2A>呼叫的方法，<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A>不會呼叫方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-274">If the <xref:System.Web.SessionState.HttpSessionState.Abandon%2A> method has been called, the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetAndReleaseItemExclusive%2A> method is not called.</span></span> <span data-ttu-id="9a6b1-275">相反地，<xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A>方法，以從資料來源中刪除工作階段項目資料。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-275">Instead, the <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A> method to delete session-item data from the data source.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-276">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-276">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-277">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-277">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
    <Member MemberName="SetItemExpireCallback">
      <MemberSignature Language="C#" Value="public abstract bool SetItemExpireCallback (System.Web.SessionState.SessionStateItemExpireCallback expireCallback);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance bool SetItemExpireCallback(class System.Web.SessionState.SessionStateItemExpireCallback expireCallback) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.SessionState.SessionStateStoreProviderBase.SetItemExpireCallback(System.Web.SessionState.SessionStateItemExpireCallback)" />
      <MemberSignature Language="VB.NET" Value="Public MustOverride Function SetItemExpireCallback (expireCallback As SessionStateItemExpireCallback) As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; abstract bool SetItemExpireCallback(System::Web::SessionState::SessionStateItemExpireCallback ^ expireCallback);" />
      <MemberSignature Language="F#" Value="abstract member SetItemExpireCallback : System.Web.SessionState.SessionStateItemExpireCallback -&gt; bool" Usage="sessionStateStoreProviderBase.SetItemExpireCallback expireCallback" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="expireCallback" Type="System.Web.SessionState.SessionStateItemExpireCallback" />
      </Parameters>
      <Docs>
        <param name="expireCallback"><span data-ttu-id="9a6b1-278">定義於 Global.asax 檔案之 <see langword="Session_OnEnd" /> 事件的 <see cref="T:System.Web.SessionState.SessionStateItemExpireCallback" /> 委派。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-278">The <see cref="T:System.Web.SessionState.SessionStateItemExpireCallback" /> delegate for the <see langword="Session_OnEnd" /> event defined in the Global.asax file.</span></span></param>
        <summary><span data-ttu-id="9a6b1-279">為定義於 Global.asax 檔案之 <see langword="Session_OnEnd" /> 事件，設定 <see cref="T:System.Web.SessionState.SessionStateItemExpireCallback" /> 委派 (Delegate) 的參考。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-279">Sets a reference to the <see cref="T:System.Web.SessionState.SessionStateItemExpireCallback" /> delegate for the <see langword="Session_OnEnd" /> event defined in the Global.asax file.</span></span></summary>
        <returns><span data-ttu-id="9a6b1-280">如果工作階段狀態存放區提供者支援呼叫 <see langword="true" /> 事件，則為 <see langword="Session_OnEnd" />，否則為 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-280"><see langword="true" /> if the session-state store provider supports calling the <see langword="Session_OnEnd" /> event; otherwise, <see langword="false" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="9a6b1-281"><xref:System.Web.SessionState.SessionStateModule>物件會呼叫<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetItemExpireCallback%2A>方法來判斷初始化模組時是否呼叫`Session_OnEnd`事件都受到<xref:System.Web.SessionState.SessionStateStoreProviderBase>實作和關聯<xref:System.Web.SessionState.SessionStateItemExpireCallback>具有委派`Session_OnEnd`事件。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-281">The <xref:System.Web.SessionState.SessionStateModule> object calls the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetItemExpireCallback%2A> method when the module is initialized to determine whether calls to the `Session_OnEnd` event are supported by the <xref:System.Web.SessionState.SessionStateStoreProviderBase> implementation and to associate the <xref:System.Web.SessionState.SessionStateItemExpireCallback> delegate with the `Session_OnEnd` event.</span></span>  
  
 <span data-ttu-id="9a6b1-282">應該使用自訂的工作階段狀態存放區提供者實作人員<xref:System.Web.SessionState.SessionStateStoreProviderBase.SetItemExpireCallback%2A>方法，以通知<xref:System.Web.SessionState.SessionStateModule>物件是否呼叫`Session_OnEnd`支援事件，並設定的本機參考<xref:System.Web.SessionState.SessionStateItemExpireCallback>所提供的委派`expireCallback`參數。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-282">Custom session-state store provider implementers should use the <xref:System.Web.SessionState.SessionStateStoreProviderBase.SetItemExpireCallback%2A> method to inform the <xref:System.Web.SessionState.SessionStateModule> object whether calls to the `Session_OnEnd` event are supported and to set a local reference to the <xref:System.Web.SessionState.SessionStateItemExpireCallback> delegate supplied by the `expireCallback` parameter.</span></span> <span data-ttu-id="9a6b1-283">自訂實作必須決定時本機<xref:System.Web.SessionState.SessionStateItemExpireCallback>會呼叫委派。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-283">The custom implementation must decide when the local <xref:System.Web.SessionState.SessionStateItemExpireCallback> delegate will be called.</span></span> <span data-ttu-id="9a6b1-284">例如，無法在呼叫期間呼叫的委派<xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A>放棄工作階段時，會呼叫的方法。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-284">For example, the delegate could be called during the call to the <xref:System.Web.SessionState.SessionStateStoreProviderBase.RemoveItem%2A> method, which is called when a session is abandoned.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="9a6b1-285">如需工作階段狀態存放區提供者實作的範例，請參閱 <<c0> [ 實作工作階段狀態存放區提供者](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66)。</span><span class="sxs-lookup"><span data-stu-id="9a6b1-285">For an example of a session-state store provider implementation, see [Implementing a Session-State Store Provider](https://msdn.microsoft.com/library/baadfec5-c881-468a-9681-7d8796b05a66).</span></span>  
  
 ]]></format>
        </remarks>
        <related type="Article" href="https://msdn.microsoft.com/library/6d60d381-6521-4e1d-9089-da6464f2a9bc"><span data-ttu-id="9a6b1-286">ASP.NET 工作階段狀態概觀</span><span class="sxs-lookup"><span data-stu-id="9a6b1-286">ASP.NET Session State Overview</span></span></related>
      </Docs>
    </Member>
  </Members>
</Type>