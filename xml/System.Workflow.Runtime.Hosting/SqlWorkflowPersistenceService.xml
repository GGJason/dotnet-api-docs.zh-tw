<Type Name="SqlWorkflowPersistenceService" FullName="System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="b155f2af9bb69352131b19b233d0373874284b15" />
    <Meta Name="ms.sourcegitcommit" Value="d31dc2ede16f6f7bc64e90d9f897ff54c4e3869b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="zh-TW" />
    <Meta Name="ms.lasthandoff" Value="04/03/2018" />
  </Metadata>
  <TypeSignature Language="C#" Value="public class SqlWorkflowPersistenceService : System.Workflow.Runtime.Hosting.WorkflowPersistenceService, System.Workflow.Runtime.IPendingWork" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit SqlWorkflowPersistenceService extends System.Workflow.Runtime.Hosting.WorkflowPersistenceService implements class System.Workflow.Runtime.IPendingWork" />
  <TypeSignature Language="DocId" Value="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" />
  <TypeSignature Language="VB.NET" Value="Public Class SqlWorkflowPersistenceService&#xA;Inherits WorkflowPersistenceService&#xA;Implements IPendingWork" />
  <TypeSignature Language="C++ CLI" Value="public ref class SqlWorkflowPersistenceService : System::Workflow::Runtime::Hosting::WorkflowPersistenceService, System::Workflow::Runtime::IPendingWork" />
  <AssemblyInfo>
    <AssemblyName>System.Workflow.Runtime</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Workflow.Runtime.Hosting.WorkflowPersistenceService</BaseTypeName>
  </Base>
  <Interfaces>
    <Interface>
      <InterfaceName>System.Workflow.Runtime.IPendingWork</InterfaceName>
    </Interface>
  </Interfaces>
  <Attributes>
    <Attribute>
      <AttributeName>System.Obsolete("The System.Workflow.* types are deprecated.  Instead, please use the new types from System.Activities.*")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary>
      <span data-ttu-id="a5e4b-101">代表使用 SQL 資料庫儲存工作流程狀態資訊的持續性服務。</span>
      <span class="sxs-lookup">
        <span data-stu-id="a5e4b-101">Represents a persistence service that uses a SQL database to store workflow state information.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
> [!NOTE]
>  [!INCLUDE[DeprecatedContent](~/includes/deprecatedcontent-md.md)]  
  
 <span data-ttu-id="a5e4b-102"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 類別代表功能完整的持續性服務。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-102">The <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> class represents a fully-functional persistence service.</span></span> <span data-ttu-id="a5e4b-103">您可以在工作流程執行階段引擎要求時，使用此全新的服務保留和擷取有關工作流程執行個體的工作流程狀態資訊。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-103">You can use this service out-of-box to persist and retrieve workflow state information about a workflow instance when requested to by the workflow runtime engine.</span></span>  
  
 <span data-ttu-id="a5e4b-104"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 會參與 <xref:System.Workflow.Runtime.Hosting.WorkflowCommitWorkBatchService> 提供的工作流程交易批次功能。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-104">The <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> participates in the workflow transaction batching functionality provided by the <xref:System.Workflow.Runtime.Hosting.WorkflowCommitWorkBatchService>.</span></span> <span data-ttu-id="a5e4b-105">也就是，它會將表示暫停寫入 SQL 資料庫的物件新增至 <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A>，並實作 <xref:System.Workflow.Runtime.IPendingWork> 介面。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-105">That is, it adds objects that represent pending writes to the SQL database to the <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> and implements the <xref:System.Workflow.Runtime.IPendingWork> interface.</span></span>  
  
 <span data-ttu-id="a5e4b-106"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 支援工作流程執行個體鎖定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-106">The <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> supports locking of workflow instances.</span></span> <span data-ttu-id="a5e4b-107">當數個工作流程執行階段共用相同的資料庫時，會使用此功能。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-107">This feature is used when several workflow runtimes share the same database.</span></span> <span data-ttu-id="a5e4b-108">如果工作流程執行階段正在使用某個工作流程執行個體，SQL 資料庫資料表中會有一個資料行將該工作流程執行個體標示為鎖定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-108">A column in the SQL database table is used to mark a workflow instance as locked whenever it is being used by a workflow runtime.</span></span> <span data-ttu-id="a5e4b-109"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 不會載入標示為由其他執行階段「使用中」的工作流程執行個體。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-109">The <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> does not load a workflow instance that is marked as "in use" by another runtime.</span></span> <span data-ttu-id="a5e4b-110">一般而言，當工作流程執行個體被保存時 (例如，閒置、完成或終止時)，就會釋放這些鎖定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-110">Typically these locks are released when the workflow instance is persisted, for example, on idle, completion, or termination.</span></span> <span data-ttu-id="a5e4b-111">若經過一段時間沒有活動，也可自動釋放鎖定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-111">The locks can also be released automatically after a period of inactivity.</span></span> <span data-ttu-id="a5e4b-112">您可使用 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 類別的建構函式來設定這段無活動的時間間隔，</span><span class="sxs-lookup"><span data-stu-id="a5e4b-112">This period of inactivity can be set using the constructor of the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> class.</span></span>  <span data-ttu-id="a5e4b-113">亦可使用組態檔來加以設定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-113">It can also be set through the configuration file.</span></span>  
  
 [!INCLUDE[crabout](~/includes/crabout-md.md)]<span data-ttu-id="a5e4b-114">持續性服務的一般詳細資訊，請參閱 <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> 類別。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-114"> persistence services in general, see the <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> class.</span></span>  
  
 <span data-ttu-id="a5e4b-115">例如，若工作流程執行個體含有 <xref:System.Workflow.Activities.DelayActivity>，那它可以包含計時器。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-115">Workflow instances can contain timers, for example, if they have a <xref:System.Workflow.Activities.DelayActivity>.</span></span> <span data-ttu-id="a5e4b-116">對於包含計時器的工作流程，<xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 會記錄下一次工作流程計時器過期的時間。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-116">For workflows that contain timers, the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> records the time when the workflow's next timer expires.</span></span> <span data-ttu-id="a5e4b-117"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 會定期輪詢資料庫，尋找計時器已過期的工作流程。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-117">The <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> periodically polls the database, looking for workflows whose timers have expired.</span></span> <span data-ttu-id="a5e4b-118">使用 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 建構函式或組態檔，即可設定輪詢間隔的頻率。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-118">The frequency of the polling interval can be set using the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> constructor or using a configuration file.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a5e4b-119">在工作流程應用程式中使用 <xref:System.Workflow.Runtime.Tracking.SqlTrackingService> 和 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 時，建議您使用單一資料庫進行保存和追蹤。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-119">When using both the <xref:System.Workflow.Runtime.Tracking.SqlTrackingService> and the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> in a workflow application, it is recommended to use a single database for both persistence and tracking.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <MemberGroup MemberName=".ctor">
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-120">初始化 <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> 類別的新執行個體。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-120">Initializes a new instance of the <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> class.</span>
          </span>
        </summary>
      </Docs>
    </MemberGroup>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public SqlWorkflowPersistenceService (System.Collections.Specialized.NameValueCollection parameters);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(class System.Collections.Specialized.NameValueCollection parameters) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.#ctor(System.Collections.Specialized.NameValueCollection)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (parameters As NameValueCollection)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; SqlWorkflowPersistenceService(System::Collections::Specialized::NameValueCollection ^ parameters);" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="parameters" Type="System.Collections.Specialized.NameValueCollection" />
      </Parameters>
      <Docs>
        <param name="parameters">
          <span data-ttu-id="a5e4b-121">包含啟動參數的 <see cref="T:System.Collections.Specialized.NameValueCollection" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-121">A <see cref="T:System.Collections.Specialized.NameValueCollection" /> that contains startup parameters.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-122">使用指定的參數初始化 <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> 類別的新執行個體。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-122">Initializes a new instance of the <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> class by using the specified parameters.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-123">當工作流程執行階段引擎從應用程式組態檔載入服務時，會叫用此建構函式。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-123">This constructor is invoked when the workflow runtime engine loads services from an application configuration file.</span></span> <span data-ttu-id="a5e4b-124">亦可採用 `NameValueCollection` 參數，以程式設計方式叫用它。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-124">It can also be programmatically invoked with the `NameValueCollection` parameter.</span></span> <span data-ttu-id="a5e4b-125">有效參數為 `ConnectionString`、`OwnershipTimeoutSeconds`、`UnloadOnIdle` 和 `EnableRetries`。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-125">The valid parameters are `ConnectionString`, `OwnershipTimeoutSeconds`, `UnloadOnIdle`, and `EnableRetries`.</span></span> <span data-ttu-id="a5e4b-126">若參數包含任何其他索引鍵，則會擲回 <xref:System.ArgumentException>。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-126">An <xref:System.ArgumentException> is thrown if parameters contain any other keys.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException">
          <span data-ttu-id="a5e4b-127">
            <paramref name="parameters" /> 包含一個無效的資料庫連接字串。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-127">
              <paramref name="parameters" /> contains an invalid database connection string.</span>
          </span>
        </exception>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="a5e4b-128">
            <paramref name="parameters" /> 為 null 參考 (在 Visual Basic 中為 <see langword="Nothing" />)。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-128">
              <paramref name="parameters" /> is a null reference (<see langword="Nothing" /> in Visual Basic).</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public SqlWorkflowPersistenceService (string connectionString);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string connectionString) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.#ctor(System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (connectionString As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; SqlWorkflowPersistenceService(System::String ^ connectionString);" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="connectionString" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="connectionString">
          <span data-ttu-id="a5e4b-129">有效的資料庫連線字串。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-129">A valid database connection string.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-130">使用資料庫連線字串，初始化 <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> 類別的新執行個體。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-130">Initializes a new instance of the <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> class by using the database connection string.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="a5e4b-131">
            <paramref name="connectionString" /> 為 null 參考 (在 Visual Basic 中為 <see langword="Nothing" />)。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-131">
              <paramref name="connectionString" /> is a null reference (<see langword="Nothing" /> in Visual Basic).</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public SqlWorkflowPersistenceService (string connectionString, bool unloadOnIdle, TimeSpan instanceOwnershipDuration, TimeSpan loadingInterval);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string connectionString, bool unloadOnIdle, valuetype System.TimeSpan instanceOwnershipDuration, valuetype System.TimeSpan loadingInterval) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.#ctor(System.String,System.Boolean,System.TimeSpan,System.TimeSpan)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (connectionString As String, unloadOnIdle As Boolean, instanceOwnershipDuration As TimeSpan, loadingInterval As TimeSpan)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; SqlWorkflowPersistenceService(System::String ^ connectionString, bool unloadOnIdle, TimeSpan instanceOwnershipDuration, TimeSpan loadingInterval);" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="connectionString" Type="System.String" />
        <Parameter Name="unloadOnIdle" Type="System.Boolean" />
        <Parameter Name="instanceOwnershipDuration" Type="System.TimeSpan" />
        <Parameter Name="loadingInterval" Type="System.TimeSpan" />
      </Parameters>
      <Docs>
        <param name="connectionString">
          <span data-ttu-id="a5e4b-132">有效的資料庫連線字串。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-132">A valid database connection string.</span>
          </span>
        </param>
        <param name="unloadOnIdle">
          <span data-ttu-id="a5e4b-133">
            <see langword="true" /> 表示會在工作流程於閒置狀態時，卸載工作流程。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-133">
              <see langword="true" /> to unload the workflow when it is in an idle state.</span>
          </span>
        </param>
        <param name="instanceOwnershipDuration">
          <span data-ttu-id="a5e4b-134">在閒置的工作流程上，鎖定的持續時間。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-134">The length of time that locks are maintained on idle workflows.</span>
          </span>
        </param>
        <param name="loadingInterval">
          <span data-ttu-id="a5e4b-135">頻率，表示持續性服務輪詢資料庫以尋找計時器已過期工作流程的頻率。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-135">The frequency at which the persistence service polls the database for workflows with expired timers.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-136">使用資料庫連線字串與其他參數，初始化 <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> 類別的新執行個體。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-136">Initializes a new instance of the <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> class using a database connection string and other parameters.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-137">請注意，若使用此建構函式 (它會提供 `instanceOwnershipDuration` 的值)，就會啟用鎖定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-137">Note that using this constructor (which provides a value for `instanceOwnershipDuration`) enables locking.</span></span> <span data-ttu-id="a5e4b-138">若要建立不啟用鎖定的持續性服務，請使用不會指定 `instanceOwnershipDuration` 的不同建構函式。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-138">To create a persistence service that does not enable locking, use a different constructor that does not specify `instanceOwnershipDuration`.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException">
          <span data-ttu-id="a5e4b-139">
            <paramref name="connectionString" /> 為 null 參考 (在 Visual Basic 中為 <see langword="Nothing" />)。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-139">
              <paramref name="connectionString" /> is a null reference (<see langword="Nothing" /> in Visual Basic).</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="EnableRetries">
      <MemberSignature Language="C#" Value="public bool EnableRetries { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool EnableRetries" />
      <MemberSignature Language="DocId" Value="P:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.EnableRetries" />
      <MemberSignature Language="VB.NET" Value="Public Property EnableRetries As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool EnableRetries { bool get(); void set(bool value); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-140">取得或設定值，這個值指定 <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> 是否要重試認可工作批次。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-140">Gets and sets a value that specifies whether the <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" /> retries committing a work batch.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="a5e4b-141">如果服務應該重試認可工作批次則為 <see langword="true" />，否則為 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-141">
              <see langword="true" /> if the service should retry committing the work batch; otherwise, <see langword="false" />.</span>
          </span>
          <span data-ttu-id="a5e4b-142">預設值為 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-142">The default is <see langword="false" />.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-143">下列工作項目無法批次處理，而且必須透過 `EnableRetries` 屬性處理任何交易重試：</span><span class="sxs-lookup"><span data-stu-id="a5e4b-143">The following work items cannot be batched and any transaction retries must be handled through the `EnableRetries` property:</span></span>  
  
-   <span data-ttu-id="a5e4b-144">輪詢有無到期的資料庫計時器。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-144">Polling for expired database timers.</span></span>  
  
-   <span data-ttu-id="a5e4b-145">載入工作流程執行個體狀態。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-145">Loading workflow instance states.</span></span>  
  
-   <span data-ttu-id="a5e4b-146">當工作流程執行階段引擎啟動時，重新載入工作流程執行個體。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-146">Reloading workflow instances when the workflow run-time engine starts.</span></span>  
  
-   <span data-ttu-id="a5e4b-147">呼叫 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.GetAllWorkflows%2A>。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-147">Calling <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.GetAllWorkflows%2A>.</span></span>  
  
 <span data-ttu-id="a5e4b-148">除了以程式設計方式設定以外，您可以透過組態檔啟用這項功能。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-148">Besides being set programmatically, this functionality can be enabled through a configuration file.</span></span> [!INCLUDE[crabout](~/includes/crabout-md.md)]<span data-ttu-id="a5e4b-149"> 如何透過組態檔設定這個屬性，請參閱[工作流程組態檔](http://msdn.microsoft.com/library/ada4bb90-6c9d-4f3d-a9d0-b559bb0f9909)。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-149"> how to set this property through a configuration file, see [Workflow Configuration Files](http://msdn.microsoft.com/library/ada4bb90-6c9d-4f3d-a9d0-b559bb0f9909).</span></span>  
  
 <span data-ttu-id="a5e4b-150">如需重試工作批次異動的一般資訊，請參閱[批次中的工作流程的狀態資訊](http://msdn.microsoft.com/library/ecda18ba-9140-4bd7-b13d-6787fdf5959d)。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-150">For general information about retrying work batch transactions, see [Batching State Information in Workflows](http://msdn.microsoft.com/library/ecda18ba-9140-4bd7-b13d-6787fdf5959d).</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetAllWorkflows">
      <MemberSignature Language="C#" Value="public System.Collections.Generic.IEnumerable&lt;System.Workflow.Runtime.Hosting.SqlPersistenceWorkflowInstanceDescription&gt; GetAllWorkflows ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance class System.Collections.Generic.IEnumerable`1&lt;class System.Workflow.Runtime.Hosting.SqlPersistenceWorkflowInstanceDescription&gt; GetAllWorkflows() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.GetAllWorkflows" />
      <MemberSignature Language="VB.NET" Value="Public Function GetAllWorkflows () As IEnumerable(Of SqlPersistenceWorkflowInstanceDescription)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::Collections::Generic::IEnumerable&lt;System::Workflow::Runtime::Hosting::SqlPersistenceWorkflowInstanceDescription ^&gt; ^ GetAllWorkflows();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Collections.Generic.IEnumerable&lt;System.Workflow.Runtime.Hosting.SqlPersistenceWorkflowInstanceDescription&gt;</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-151">擷取所有已保存工作流程的執行個體描述。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-151">Retrieves instance descriptions of all persisted workflows.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="a5e4b-152">所有已保存工作流程的清單。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-152">A list of all persisted workflows.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadCompletedContextActivity">
      <MemberSignature Language="C#" Value="protected internal override System.Workflow.ComponentModel.Activity LoadCompletedContextActivity (Guid id, System.Workflow.ComponentModel.Activity outerActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance class System.Workflow.ComponentModel.Activity LoadCompletedContextActivity(valuetype System.Guid id, class System.Workflow.ComponentModel.Activity outerActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadCompletedContextActivity(System.Guid,System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Function LoadCompletedContextActivity (id As Guid, outerActivity As Activity) As Activity" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override System::Workflow::ComponentModel::Activity ^ LoadCompletedContextActivity(Guid id, System::Workflow::ComponentModel::Activity ^ outerActivity);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Workflow.ComponentModel.Activity</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="id" Type="System.Guid" />
        <Parameter Name="outerActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="id">
          <span data-ttu-id="a5e4b-153">範圍活動的 <see cref="T:System.Guid" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-153">The <see cref="T:System.Guid" /> of the scope activity.</span>
          </span>
        </param>
        <param name="outerActivity">
          <span data-ttu-id="a5e4b-154">包圍範圍活動的 <see cref="T:System.Workflow.ComponentModel.Activity" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-154">The <see cref="T:System.Workflow.ComponentModel.Activity" /> that encloses the scope activity.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-155">從資料庫擷取指定的完成範圍。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-155">Retrieves the specified completed scope from the database.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="a5e4b-156">表示已完成範圍的 <see cref="T:System.Workflow.ComponentModel.Activity" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-156">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the completed scope.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-157">在補償期間，工作流程執行階段引擎會使用 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadCompletedContextActivity%2A>。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-157">The workflow run-time engine uses <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadCompletedContextActivity%2A> during compensation.</span></span> <span data-ttu-id="a5e4b-158"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadCompletedContextActivity%2A> 應該只由工作流程執行階段引擎呼叫。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-158"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadCompletedContextActivity%2A> should only be called by the workflow run-time engine.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="a5e4b-159">在資料庫中找不到符合 <paramref name="id" /> 的範圍。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-159">A scope that matches <paramref name="id" /> could not be found in the database.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="LoadExpiredTimerWorkflowIds">
      <MemberSignature Language="C#" Value="public System.Collections.Generic.IList&lt;Guid&gt; LoadExpiredTimerWorkflowIds ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance class System.Collections.Generic.IList`1&lt;valuetype System.Guid&gt; LoadExpiredTimerWorkflowIds() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadExpiredTimerWorkflowIds" />
      <MemberSignature Language="VB.NET" Value="Public Function LoadExpiredTimerWorkflowIds () As IList(Of Guid)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::Collections::Generic::IList&lt;Guid&gt; ^ LoadExpiredTimerWorkflowIds();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Collections.Generic.IList&lt;System.Guid&gt;</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-160">擷取有到期計時器的工作流程 ID 清單。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-160">Retrieves a list of ids for workflows with expired timers.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="a5e4b-161">有到期計時器的工作流程 ID 清單。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-161">A list of ids for workflows with expired timers.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadingInterval">
      <MemberSignature Language="C#" Value="public TimeSpan LoadingInterval { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.TimeSpan LoadingInterval" />
      <MemberSignature Language="DocId" Value="P:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadingInterval" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property LoadingInterval As TimeSpan" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property TimeSpan LoadingInterval { TimeSpan get(); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.TimeSpan</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-162">取得載入時間間隔的長度。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-162">Gets the length of the loading interval.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="a5e4b-163">頻率，表示持續性服務輪詢資料庫以尋找計時器已過期工作流程的頻率。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-163">The frequency at which the persistence service polls the database for workflows with expired timers.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-164">預設值為 2 分鐘。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-164">The default value is 2 minutes.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadWorkflowInstanceState">
      <MemberSignature Language="C#" Value="protected internal override System.Workflow.ComponentModel.Activity LoadWorkflowInstanceState (Guid id);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance class System.Workflow.ComponentModel.Activity LoadWorkflowInstanceState(valuetype System.Guid id) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadWorkflowInstanceState(System.Guid)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Function LoadWorkflowInstanceState (id As Guid) As Activity" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override System::Workflow::ComponentModel::Activity ^ LoadWorkflowInstanceState(Guid id);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Workflow.ComponentModel.Activity</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="id" Type="System.Guid" />
      </Parameters>
      <Docs>
        <param name="id">
          <span data-ttu-id="a5e4b-165">工作流程執行個體狀態的 <see cref="T:System.Guid" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-165">The <see cref="T:System.Guid" /> of the workflow instance state.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-166">從資料庫擷取指定的工作流程執行個體狀態。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-166">Retrieves the specified workflow instance state from the database.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="a5e4b-167">
            <see cref="T:System.Workflow.ComponentModel.Activity" />，代表工作流程執行個體的根活動。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-167">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the root activity of the workflow instance.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-168"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadWorkflowInstanceState%2A> 應該只由工作流程執行階段引擎呼叫。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-168"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.LoadWorkflowInstanceState%2A> should only be called by the workflow run-time engine.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="a5e4b-169">在資料庫中找不到符合 <paramref name="id" /> 的工作流程執行個體狀態。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-169">A workflow instance state that matches <paramref name="id" /> could not be found in the database.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="OnStarted">
      <MemberSignature Language="C#" Value="protected override void OnStarted ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void OnStarted() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.OnStarted" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub OnStarted ()" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void OnStarted();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-170">啟動新的計時器並復原執行中的工作流程執行個體。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-170">Starts a new timer and recovers running workflow instances.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="SaveCompletedContextActivity">
      <MemberSignature Language="C#" Value="protected internal override void SaveCompletedContextActivity (System.Workflow.ComponentModel.Activity completedScopeActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void SaveCompletedContextActivity(class System.Workflow.ComponentModel.Activity completedScopeActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.SaveCompletedContextActivity(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub SaveCompletedContextActivity (completedScopeActivity As Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void SaveCompletedContextActivity(System::Workflow::ComponentModel::Activity ^ completedScopeActivity);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="completedScopeActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="completedScopeActivity">
          <span data-ttu-id="a5e4b-171">表示已完成範圍的 <see cref="T:System.Workflow.ComponentModel.Activity" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-171">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the completed scope.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-172">儲存指定完成範圍的狀態。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-172">Saves the state of the specified completed scope.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-173">`completedScopeActivity` 會序列化並新增至 <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> 中。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-173">`completedScopeActivity` is serialized and added to the <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A>.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="SaveWorkflowInstanceState">
      <MemberSignature Language="C#" Value="protected internal override void SaveWorkflowInstanceState (System.Workflow.ComponentModel.Activity rootActivity, bool unlock);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void SaveWorkflowInstanceState(class System.Workflow.ComponentModel.Activity rootActivity, bool unlock) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.SaveWorkflowInstanceState(System.Workflow.ComponentModel.Activity,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub SaveWorkflowInstanceState (rootActivity As Activity, unlock As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void SaveWorkflowInstanceState(System::Workflow::ComponentModel::Activity ^ rootActivity, bool unlock);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
        <Parameter Name="unlock" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="a5e4b-174">工作流程執行個體的根活動。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-174">The root activity of the workflow instance.</span>
          </span>
        </param>
        <param name="unlock">
          <span data-ttu-id="a5e4b-175">如果不應鎖定工作流程執行個體則為 <see langword="true" />，如果應鎖定工作流程執行個體則為 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-175">
              <see langword="true" /> if the workflow instance should not be locked; <see langword="false" /> if the workflow instance should be locked.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-176">儲存指定的工作流程執行個體狀態。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-176">Saves the specified workflow instance state.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-177">`rootActivity` 會序列化並寫入 <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> 中。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-177">`rootActivity` is serialized and written to the <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A>.</span></span> <span data-ttu-id="a5e4b-178">全新的 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 會實作工作流程執行個體狀態的鎖定。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-178">The out-of-box <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> implements locking of the workflow instance state.</span></span> <span data-ttu-id="a5e4b-179">使用者必須設定建構函式中的 `instanceOwnershipDuration` 參數。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-179">The user must configure the `instanceOwnershipDuration` parameter in the constructor.</span></span> <span data-ttu-id="a5e4b-180">這個值會決定主機可以鎖定執行個體的時間間隔。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-180">This value decides the time interval during which the instance can be locked by a host.</span></span> <span data-ttu-id="a5e4b-181">如果多個主機共用相同的持續性服務和資料庫，而另一個主機嘗試在此間隔時間中載入執行個體，則會發生 <xref:System.Workflow.Runtime.WorkflowOwnershipException>。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-181">If multiple hosts share the same persistence service and database, and another host tries to load the instance during this interval, a <xref:System.Workflow.Runtime.WorkflowOwnershipException> occurs.</span></span> [!INCLUDE[crdefault](~/includes/crdefault-md.md)]<span data-ttu-id="a5e4b-182"><xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> 類別。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-182"> the <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> class.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ServiceInstanceId">
      <MemberSignature Language="C#" Value="public Guid ServiceInstanceId { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Guid ServiceInstanceId" />
      <MemberSignature Language="DocId" Value="P:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.ServiceInstanceId" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property ServiceInstanceId As Guid" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property Guid ServiceInstanceId { Guid get(); };" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Guid</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-183">取得服務執行個體識別項。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-183">Gets the service instance identifier.</span>
          </span>
        </summary>
        <value>
          <span data-ttu-id="a5e4b-184">服務執行個體識別項。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-184">The service instance identifier.</span>
          </span>
        </value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-185">預設值是 `Guid.Empty`。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-185">The default value is `Guid.Empty`.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Start">
      <MemberSignature Language="C#" Value="protected internal override void Start ();" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void Start() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.Start" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub Start ()" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void Start();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-186">啟動 <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-186">Starts the <see cref="T:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService" />.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-187"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.Start%2A> 只能由工作流程執行階段引擎呼叫。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-187"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.Start%2A> must only be called by the workflow run-time engine.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Stop">
      <MemberSignature Language="C#" Value="protected internal override void Stop ();" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void Stop() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.Stop" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub Stop ()" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void Stop();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="a5e4b-188">停止服務和計時器。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-188">Stops the service and the timer.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="System.Workflow.Runtime.IPendingWork.Commit">
      <MemberSignature Language="C#" Value="void IPendingWork.Commit (System.Transactions.Transaction transaction, System.Collections.ICollection items);" />
      <MemberSignature Language="ILAsm" Value=".method hidebysig newslot virtual instance void System.Workflow.Runtime.IPendingWork.Commit(class System.Transactions.Transaction transaction, class System.Collections.ICollection items) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System#Workflow#Runtime#IPendingWork#Commit(System.Transactions.Transaction,System.Collections.ICollection)" />
      <MemberSignature Language="C++ CLI" Value=" virtual void System.Workflow.Runtime.IPendingWork.Commit(System::Transactions::Transaction ^ transaction, System::Collections::ICollection ^ items) = System::Workflow::Runtime::IPendingWork::Commit;" />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.Workflow.Runtime.IPendingWork.Commit(System.Transactions.Transaction,System.Collections.ICollection)</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="transaction" Type="System.Transactions.Transaction" />
        <Parameter Name="items" Type="System.Collections.ICollection" />
      </Parameters>
      <Docs>
        <param name="transaction">
          <span data-ttu-id="a5e4b-189">
            <see cref="T:System.Transactions.Transaction" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-189">A <see cref="T:System.Transactions.Transaction" />.</span>
          </span>
        </param>
        <param name="items">
          <span data-ttu-id="a5e4b-190">要寫入資料庫中的工作項目的 <see cref="T:System.Collections.ICollection" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-190">The <see cref="T:System.Collections.ICollection" /> of work items to be written to the database.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-191">將序列化狀態物件的 <see cref="T:System.Collections.ICollection" /> 寫入資料庫中。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-191">Writes an <see cref="T:System.Collections.ICollection" /> of serialized state objects to the database.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-192">包含在 `items` 中的序列化狀態物件會寫入資料庫中。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-192">The serialized state objects that are contained in `items` are written to the database.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.Workflow.Runtime.Hosting.PersistenceException">
          <span data-ttu-id="a5e4b-193">嘗試寫入資料庫時，發生錯誤。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-193">An error occurred while trying to write to the database.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="System.Workflow.Runtime.IPendingWork.Complete">
      <MemberSignature Language="C#" Value="void IPendingWork.Complete (bool succeeded, System.Collections.ICollection items);" />
      <MemberSignature Language="ILAsm" Value=".method hidebysig newslot virtual instance void System.Workflow.Runtime.IPendingWork.Complete(bool succeeded, class System.Collections.ICollection items) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System#Workflow#Runtime#IPendingWork#Complete(System.Boolean,System.Collections.ICollection)" />
      <MemberSignature Language="VB.NET" Value="Sub Complete (succeeded As Boolean, items As ICollection) Implements IPendingWork.Complete" />
      <MemberSignature Language="C++ CLI" Value=" virtual void System.Workflow.Runtime.IPendingWork.Complete(bool succeeded, System::Collections::ICollection ^ items) = System::Workflow::Runtime::IPendingWork::Complete;" />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.Workflow.Runtime.IPendingWork.Complete(System.Boolean,System.Collections.ICollection)</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="succeeded" Type="System.Boolean" />
        <Parameter Name="items" Type="System.Collections.ICollection" />
      </Parameters>
      <Docs>
        <param name="succeeded">
          <span data-ttu-id="a5e4b-194">如果認可成功，則為 <see langword="true" />，否則為 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-194">
              <see langword="true" /> if the commit succeeded; otherwise, <see langword="false" />.</span>
          </span>
        </param>
        <param name="items">
          <span data-ttu-id="a5e4b-195">序列化狀態物件的 <see cref="T:System.Collections.ICollection" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-195">An <see cref="T:System.Collections.ICollection" /> of serialized state objects.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-196">完成工作批次並釋放任何資源。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-196">Completes the work batch and releases any resources.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-197">在 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 的全新實作中，</span><span class="sxs-lookup"><span data-stu-id="a5e4b-197">In the out-of-box implementation of the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService>,</span></span>   
 <span data-ttu-id="a5e4b-198"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23Complete%2A> 沒有任何作業。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-198"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23Complete%2A> is a no-op.</span></span> <span data-ttu-id="a5e4b-199">如果您繼承並擴充 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> 類別，可以使用 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23Complete%2A> 來執行在您的實作指定的 `items` 上所需的任何動作。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-199">If you inherit from and extend the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> class, you may use <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23Complete%2A> to perform any actions required on `items` dictated by your implementation.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="System.Workflow.Runtime.IPendingWork.MustCommit">
      <MemberSignature Language="C#" Value="bool IPendingWork.MustCommit (System.Collections.ICollection items);" />
      <MemberSignature Language="ILAsm" Value=".method hidebysig newslot virtual instance bool System.Workflow.Runtime.IPendingWork.MustCommit(class System.Collections.ICollection items) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System#Workflow#Runtime#IPendingWork#MustCommit(System.Collections.ICollection)" />
      <MemberSignature Language="VB.NET" Value="Function MustCommit (items As ICollection) As Boolean Implements IPendingWork.MustCommit" />
      <MemberSignature Language="C++ CLI" Value=" virtual bool System.Workflow.Runtime.IPendingWork.MustCommit(System::Collections::ICollection ^ items) = System::Workflow::Runtime::IPendingWork::MustCommit;" />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.Workflow.Runtime.IPendingWork.MustCommit(System.Collections.ICollection)</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="items" Type="System.Collections.ICollection" />
      </Parameters>
      <Docs>
        <param name="items">
          <span data-ttu-id="a5e4b-200">要寫入資料庫中的序列化狀態物件的 <see cref="T:System.Collections.ICollection" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-200">An <see cref="T:System.Collections.ICollection" /> of serialized state objects to be written to the database.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-201">傳回值，這個值會指出是否應將序列化狀態物件的集合寫入資料庫中。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-201">Returns a value that indicates whether the collection of serialized state objects should be written to the database.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="a5e4b-202">
            <see langword="true" /> 表示應認可批次。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-202">
              <see langword="true" /> indicates that the batch should be committed.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-203"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23MustCommit(System.Collections.ICollection)> 一律傳回 `true`，這個值會指示工作流程執行階段引擎叫用批次上的 <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23MustCommit(System.Collections.ICollection)>。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-203"><xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23MustCommit(System.Collections.ICollection)> always returns `true`, which instructs the workflow run-time engine to invoke <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.System%23Workflow%23Runtime%23IPendingWork%23MustCommit(System.Collections.ICollection)> on the batch.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="UnloadOnIdle">
      <MemberSignature Language="C#" Value="protected internal override bool UnloadOnIdle (System.Workflow.ComponentModel.Activity activity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance bool UnloadOnIdle(class System.Workflow.ComponentModel.Activity activity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.UnloadOnIdle(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override bool UnloadOnIdle(System::Workflow::ComponentModel::Activity ^ activity);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="activity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="activity">
          <span data-ttu-id="a5e4b-204">
            <see cref="T:System.Workflow.ComponentModel.Activity" />，代表工作流程執行個體的根活動。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-204">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-205">傳回值，這個值會指示是否要在工作流程於閒置狀態時將其卸載。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-205">Returns a value that indicates whether the workflow is unloaded when it is in an idle state.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="a5e4b-206">如果在工作流程於閒置狀態時將它卸載則為 <see langword="true" />，否則為 <see langword="false" />。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-206">
              <see langword="true" /> if the workflow is unloaded when it is in an idle state; otherwise, <see langword="false" />.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="UnlockWorkflowInstanceState">
      <MemberSignature Language="C#" Value="protected internal override void UnlockWorkflowInstanceState (System.Workflow.ComponentModel.Activity rootActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void UnlockWorkflowInstanceState(class System.Workflow.ComponentModel.Activity rootActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService.UnlockWorkflowInstanceState(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub UnlockWorkflowInstanceState (rootActivity As Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void UnlockWorkflowInstanceState(System::Workflow::ComponentModel::Activity ^ rootActivity);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="a5e4b-207">
            <see cref="T:System.Workflow.ComponentModel.Activity" />，代表工作流程執行個體的根活動。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-207">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="a5e4b-208">解除鎖定對指定之工作流程執行個體狀態的存取。</span>
          <span class="sxs-lookup">
            <span data-stu-id="a5e4b-208">Unlocks access to the specified workflow instance state.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="a5e4b-209">這個方法由工作流程執行階段用來在沒有持續性的資料存放區中解除鎖定工作流程執行個體狀態，並且在執行階段必須解除鎖定沒有持續的狀態時由工作流程執行階段呼叫，例如，在 <xref:System.Workflow.Runtime.WorkflowInstance.Abort%2A> 的情況時。</span><span class="sxs-lookup"><span data-stu-id="a5e4b-209">This method is used by the workflow runtime to unlock a workflow instance state in the data store without persistence and is called by the workflow runtime if the runtime must unlock the state without persisting, for example, in the case of an <xref:System.Workflow.Runtime.WorkflowInstance.Abort%2A>.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>