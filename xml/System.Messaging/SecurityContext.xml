<Type Name="SecurityContext" FullName="System.Messaging.SecurityContext">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="07eceb3c5ff786756a2f704065e19d2f93499602" />
    <Meta Name="ms.sourcegitcommit" Value="0e1f030650a307c745ee84ed547ef858acaea587" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="zh-TW" />
    <Meta Name="ms.lasthandoff" Value="11/29/2018" />
    <Meta Name="ms.locfileid" Value="52598482" />
  </Metadata>
  <TypeSignature Language="C#" Value="public sealed class SecurityContext : IDisposable" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed beforefieldinit SecurityContext extends System.Object implements class System.IDisposable" />
  <TypeSignature Language="DocId" Value="T:System.Messaging.SecurityContext" />
  <TypeSignature Language="VB.NET" Value="Public NotInheritable Class SecurityContext&#xA;Implements IDisposable" />
  <TypeSignature Language="C++ CLI" Value="public ref class SecurityContext sealed : IDisposable" />
  <TypeSignature Language="F#" Value="type SecurityContext = class&#xA;    interface IDisposable" />
  <AssemblyInfo>
    <AssemblyName>System.Messaging</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Object</BaseTypeName>
  </Base>
  <Interfaces>
    <Interface>
      <InterfaceName>System.IDisposable</InterfaceName>
    </Interface>
  </Interfaces>
  <Docs>
    <summary>
      <span data-ttu-id="18bb4-101">表示佇列中訊息的安全性內容。</span>
      <span class="sxs-lookup">
        <span data-stu-id="18bb4-101">Represents the security context for a message in a queue.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="18bb4-102">安全性內容包含快取的安全性資訊，例如憑證和寄件者識別碼附加到訊息，要求驗證時所需的內部憑證對應的私密金鑰，使用者的 SID。</span><span class="sxs-lookup"><span data-stu-id="18bb4-102">The security context contains cached security information such as an internal certificate, the corresponding private key, the user's SID, needed to attach a certificate and the sender identifier to a message when requesting authentication.</span></span>  
  
 <span data-ttu-id="18bb4-103">如果用戶端，例如 ASP.NET 應用程式，模擬使用者，以將訊息傳送至佇列時，使用者的身分識別用來存取佇列。</span><span class="sxs-lookup"><span data-stu-id="18bb4-103">If a client, such as an ASP.NET application, impersonates a user to send a message to a queue, the identity of the user is used to access the queue.</span></span> <span data-ttu-id="18bb4-104">如果遠端佇列，這些認證會快取，並接著傳送至佇列的訊息時使用。</span><span class="sxs-lookup"><span data-stu-id="18bb4-104">If the queue is remote, these credentials are cached and used for messages that are subsequently sent to the queue.</span></span> <span data-ttu-id="18bb4-105">因此，在後續的訊息中的 SID 會將訊息傳送至佇列的第一個使用者的快取身分識別。</span><span class="sxs-lookup"><span data-stu-id="18bb4-105">Therefore, the SID in subsequent messages will be the cached identity of the first user that sent a message to the queue.</span></span> <span data-ttu-id="18bb4-106">將訊息傳送至佇列的第一個使用者的快取身分識別會用於後續的使用者。</span><span class="sxs-lookup"><span data-stu-id="18bb4-106">The cached identity of the first user that sent a message to the queue will be used for subsequent users.</span></span>  
  
 <span data-ttu-id="18bb4-107">若要解決這個問題，將設定安全性內容使用<xref:System.Messaging.Message.SecurityContext%2A>之前傳送訊息到遠端的佇列，以確保目前的使用者認證會用來存取佇列。</span><span class="sxs-lookup"><span data-stu-id="18bb4-107">To overcome this problem, set the security context using <xref:System.Messaging.Message.SecurityContext%2A> before sending a message to a remote queue to ensure that the current user's credentials are used to gain access to the queue.</span></span> <span data-ttu-id="18bb4-108">不過，建議的最佳作法是：</span><span class="sxs-lookup"><span data-stu-id="18bb4-108">However, the suggested best practice is to:</span></span>  
  
1.  <span data-ttu-id="18bb4-109">請驗證的佇列的佇列。</span><span class="sxs-lookup"><span data-stu-id="18bb4-109">Make the queue an authenticated queue.</span></span>  
  
2.  <span data-ttu-id="18bb4-110">做為網域身分識別執行 ASP.NET 應用程式，並授權該應用程式寫入至佇列。</span><span class="sxs-lookup"><span data-stu-id="18bb4-110">Run the ASP.NET application as a domain identity and authorize that application to write to the queue.</span></span>  
  
3.  <span data-ttu-id="18bb4-111">不會模擬使用者時使用的佇列。</span><span class="sxs-lookup"><span data-stu-id="18bb4-111">Do not impersonate the user when using the queue.</span></span> <span data-ttu-id="18bb4-112">相反地，取得呼叫者身分識別，然後執行授權檢查 ASP.NET 應用程式中或是訊息中包含呼叫者身分識別，然後執行簽入接收者應用程式的授權。</span><span class="sxs-lookup"><span data-stu-id="18bb4-112">Instead, get the caller's identity and either perform authorization checking in the ASP.NET application or include the caller's identity as part of the message and perform authorization checking in the receiver application.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName="Dispose">
      <MemberSignature Language="C#" Value="public void Dispose ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Dispose() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Messaging.SecurityContext.Dispose" />
      <MemberSignature Language="VB.NET" Value="Public Sub Dispose ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void Dispose();" />
      <MemberSignature Language="F#" Value="abstract member Dispose : unit -&gt; unit&#xA;override this.Dispose : unit -&gt; unit" Usage="securityContext.Dispose " />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.IDisposable.Dispose</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System.Messaging</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="18bb4-113">釋放 <see cref="T:System.Messaging.SecurityContext" /> 所使用的所有資源。</span>
          <span class="sxs-lookup">
            <span data-stu-id="18bb4-113">Releases all resources used by the <see cref="T:System.Messaging.SecurityContext" />.</span>
          </span>
        </summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="Finalize">
      <MemberSignature Language="C#" Value="~SecurityContext ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void Finalize() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Messaging.SecurityContext.Finalize" />
      <MemberSignature Language="VB.NET" Value="Finalize ()" />
      <MemberSignature Language="C++ CLI" Value="!SecurityContext ()" />
      <MemberSignature Language="F#" Value="override this.Finalize : unit -&gt; unit" Usage="securityContext.Finalize " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Messaging</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>To be added.</summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
  </Members>
</Type>