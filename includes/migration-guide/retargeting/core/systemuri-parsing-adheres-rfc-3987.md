### <a name="systemuri-parsing-adheres-to-rfc-3987"></a><span data-ttu-id="d699a-101">System.Uri 剖析遵守 RFC 3987</span><span class="sxs-lookup"><span data-stu-id="d699a-101">System.Uri parsing adheres to RFC 3987</span></span>

|   |   |
|---|---|
|<span data-ttu-id="d699a-102">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d699a-102">Details</span></span>|<span data-ttu-id="d699a-103">URI 剖析在 .NET 4.5 中已做了幾項變更。</span><span class="sxs-lookup"><span data-stu-id="d699a-103">URI parsing has changed in several ways in .NET 4.5.</span></span> <span data-ttu-id="d699a-104">不過請注意，這些變更只會影響以 .NET 4.5 為目標的程式碼。</span><span class="sxs-lookup"><span data-stu-id="d699a-104">Note, however, that these changes only affect code targeting .NET 4.5.</span></span> <span data-ttu-id="d699a-105">如果某個二進位檔是以 .NET 4.0 為目標，則會遵守舊版行為。</span><span class="sxs-lookup"><span data-stu-id="d699a-105">If a binary targets .NET 4.0, the old behavior will be observed.</span></span> <span data-ttu-id="d699a-106">.NET 4.5 中的 URI 剖析變更包括：</span><span class="sxs-lookup"><span data-stu-id="d699a-106">Changes to URI parsing in .NET 4.5 include:</span></span><ul><li><span data-ttu-id="d699a-107">URI 剖析將會根據 RFC 3987 中最新的 IRI 規則來執行正規化和字元檢查。</span><span class="sxs-lookup"><span data-stu-id="d699a-107">URI parsing will perform normalization and character checking according to the latest IRI rules in RFC 3987.</span></span></li><li><span data-ttu-id="d699a-108">只會在 URI 的主機部分執行 Unicode 正規化格式 C。</span><span class="sxs-lookup"><span data-stu-id="d699a-108">Unicode normalization form C will only be performed on the host portion of the URI.</span></span></li><li><span data-ttu-id="d699a-109">無效的 mailto: URI 現在會造成例外狀況。</span><span class="sxs-lookup"><span data-stu-id="d699a-109">Invalid mailto: URIs will now cause an exception.</span></span></li><li><span data-ttu-id="d699a-110">現在會保留路徑線段結尾的後置點。</span><span class="sxs-lookup"><span data-stu-id="d699a-110">Trailing dots at the end of a path segment are now preserved.</span></span></li><li><span data-ttu-id="d699a-111"><code>file://</code> URI 不會逸出 <code>?</code> 字元。</span><span class="sxs-lookup"><span data-stu-id="d699a-111"><code>file://</code> URIs do not escape the <code>?</code> character.</span></span></li><li><span data-ttu-id="d699a-112">不支援 Unicode 控制字元 <code>U+0080</code> 至 <code>U+009F</code>。</span><span class="sxs-lookup"><span data-stu-id="d699a-112">Unicode control characters <code>U+0080</code> through <code>U+009F</code> are not supported.</span></span></li><li><span data-ttu-id="d699a-113">逗號字元 <code>,</code> 或 <code>%2c</code> 不會自動設為未逸出。</span><span class="sxs-lookup"><span data-stu-id="d699a-113">Comma characters <code>,</code> or <code>%2c</code> are not automatically unescaped.</span></span></li></ul>|
|<span data-ttu-id="d699a-114">建議</span><span class="sxs-lookup"><span data-stu-id="d699a-114">Suggestion</span></span>|<span data-ttu-id="d699a-115">如果需要舊版 .NET 4.0 URI 剖析語意 (通常不需要)，藉由設定 .NET 4.0 目標即可使用。</span><span class="sxs-lookup"><span data-stu-id="d699a-115">If the old .NET 4.0 URI parsing semantics are necessary (they often aren't), they can be used by targeting .NET 4.0.</span></span> <span data-ttu-id="d699a-116">您可以在組件上使用 <xref:System.Runtime.Versioning.TargetFrameworkAttribute?displayProperty=name>，或透過 Visual Studio 專案系統 UI 的 [專案屬性] 頁面來完成此作業。</span><span class="sxs-lookup"><span data-stu-id="d699a-116">This can be accomplished by using a <xref:System.Runtime.Versioning.TargetFrameworkAttribute?displayProperty=name> on the assembly, or through Visual Studio's project system UI in the 'project properties' page.</span></span>|
|<span data-ttu-id="d699a-117">範圍</span><span class="sxs-lookup"><span data-stu-id="d699a-117">Scope</span></span>|<span data-ttu-id="d699a-118">主要</span><span class="sxs-lookup"><span data-stu-id="d699a-118">Major</span></span>|
|<span data-ttu-id="d699a-119">版本</span><span class="sxs-lookup"><span data-stu-id="d699a-119">Version</span></span>|<span data-ttu-id="d699a-120">4.5</span><span class="sxs-lookup"><span data-stu-id="d699a-120">4.5</span></span>|
|<span data-ttu-id="d699a-121">類型</span><span class="sxs-lookup"><span data-stu-id="d699a-121">Type</span></span>|<span data-ttu-id="d699a-122">正在重定目標</span><span class="sxs-lookup"><span data-stu-id="d699a-122">Retargeting</span></span>|
|<span data-ttu-id="d699a-123">受影響的 API</span><span class="sxs-lookup"><span data-stu-id="d699a-123">Affected APIs</span></span>|<ul><li><xref:System.Uri.%23ctor(System.String)?displayProperty=nameWithType></li><li><xref:System.Uri.%23ctor(System.String,System.Boolean)?displayProperty=nameWithType></li><li><xref:System.Uri.%23ctor(System.String,System.UriKind)?displayProperty=nameWithType></li><li><xref:System.Uri.%23ctor(System.Uri,System.String)?displayProperty=nameWithType></li><li><xref:System.Uri.TryCreate(System.String,System.UriKind,System.Uri@)?displayProperty=nameWithType></li><li><xref:System.Uri.TryCreate(System.Uri,System.String,System.Uri@)?displayProperty=nameWithType></li><li><xref:System.Uri.TryCreate(System.Uri,System.Uri,System.Uri@)?displayProperty=nameWithType></li></ul>|

