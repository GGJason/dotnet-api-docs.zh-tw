### <a name="change-in-path-separator-character-in-fullname-property-of-ziparchiveentry-objects"></a><span data-ttu-id="90438-101">變更以 FullName ZipArchiveEntry 物件屬性中的路徑分隔符號字元</span><span class="sxs-lookup"><span data-stu-id="90438-101">Change in path separator character in FullName property of ZipArchiveEntry objects</span></span>

|   |   |
|---|---|
|<span data-ttu-id="90438-102">詳細資料</span><span class="sxs-lookup"><span data-stu-id="90438-102">Details</span></span>|<span data-ttu-id="90438-103">針對以.NET Framework 4.6.1 和更新版本為目標的應用程式，路徑分隔符號字元已從一個反斜線 (&quot;&quot;) 成正斜線 (&quot;/&quot;) 中<xref:System.IO.Compression.ZipArchiveEntry.FullName>屬性<xref:System.IO.Compression.ZipArchiveEntry>的多載所建立的物件<xref:System.IO.Compression.ZipFile.CreateFromDirectory%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="90438-103">For apps that target the .NET Framework 4.6.1 and later versions, the path separator character has changed from a backslash (&quot;&quot;) to a forward slash (&quot;/&quot;) in the <xref:System.IO.Compression.ZipArchiveEntry.FullName> property of <xref:System.IO.Compression.ZipArchiveEntry>  objects created by overloads of the <xref:System.IO.Compression.ZipFile.CreateFromDirectory%2A> method.</span></span> <span data-ttu-id="90438-104">變更帶來.NET 實作，符合區段 4.4.17.1 [。ZIP 檔案格式規格](https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT)並允許。ZIP 封存在非 Windows 系統上要解壓縮。解壓縮 zip 檔案建立應用程式的目標為舊版.NET Framework 在非 Windows 作業系統，例如 Macintosh 上失敗時保留目錄結構。</span><span class="sxs-lookup"><span data-stu-id="90438-104">The change brings the .NET implementation into conformity with section 4.4.17.1 of the [.ZIP File Format Specification](https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT) and allows .ZIP archives to be decompressed on non-Windows systems.Decompressing a zip file created by an app that targets a previous version of the .NET Framework on non-Windows operating systems such as the Macintosh fails to preserve the directory structure.</span></span> <span data-ttu-id="90438-105">例如，macintosh 之外，它會建立一組檔案的檔案名稱串連的目錄路徑，以及任何反斜線 (&quot;&quot;) 字元和檔案名稱。</span><span class="sxs-lookup"><span data-stu-id="90438-105">For example, on the Macintosh, it creates a set of files whose filename concatenates the directory path, along with any backslash (&quot;&quot;) characters, and the filename.</span></span> <span data-ttu-id="90438-106">因此，解壓縮檔案的目錄結構會無法保留。</span><span class="sxs-lookup"><span data-stu-id="90438-106">As a result, the directory structure of decompressed files is not preserved.</span></span>|
|<span data-ttu-id="90438-107">建議</span><span class="sxs-lookup"><span data-stu-id="90438-107">Suggestion</span></span>|<span data-ttu-id="90438-108">在此變更的影響。在 Windows 作業系統.NET Framework 中的應用程式開發介面會被解壓縮的 ZIP 檔案<xref:System.IO?displayProperty=nameWithType>命名空間很小，因為這些 Api 可以順暢地處理一條斜線 (&quot;/&quot;) 或反斜線 (&quot;\&q u o t;) 做為路徑分隔符號字元。如果不需要這項變更，您可以藉由新增組態設定，來選擇不使用[\<執行階段 >](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md)應用程式組態檔的區段。</span><span class="sxs-lookup"><span data-stu-id="90438-108">The impact of this change on .ZIP files that are decompressed on the Windows operating system by APIs in the .NET Framework <xref:System.IO?displayProperty=nameWithType> namespace should be minimal, since these APIs can seamlessly handle either a slash (&quot;/&quot;) or a backslash (&quot;\&quot;) as the path separator character.If this change is undesirable, you can opt out of it by adding a configuration setting to the [\<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of your application configuration file.</span></span> <span data-ttu-id="90438-109">下列範例會顯示`<runtime>`區段和`Switch.System.IO.Compression.ZipFile.UseBackslash`退出交換器：</span><span class="sxs-lookup"><span data-stu-id="90438-109">The following example shows both the `<runtime>` section and the `Switch.System.IO.Compression.ZipFile.UseBackslash` opt-out switch:</span></span><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.IO.Compression.ZipFile.UseBackslash=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="90438-110">此外，舊版.NET Framework 為目標但在.NET Framework 4.6.1 和更新版本上執行的應用程式也可以選擇這種行為加入至組態設定[\<執行階段 >](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md)應用程式組態檔的區段。</span><span class="sxs-lookup"><span data-stu-id="90438-110">In addition, apps that target previous versions of the .NET Framework but are running on the .NET Framework 4.6.1 and later versions can opt in to this behavior by adding a configuration setting to the [\<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file.</span></span> <span data-ttu-id="90438-111">下圖顯示同時`<runtime>`區段和`Switch.System.IO.Compression.ZipFile.UseBackslash`選擇加入的參數。</span><span class="sxs-lookup"><span data-stu-id="90438-111">The following shows both the `<runtime>` section and the `Switch.System.IO.Compression.ZipFile.UseBackslash` opt-in switch.</span></span><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.IO.Compression.ZipFile.UseBackslash=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="90438-112">範圍</span><span class="sxs-lookup"><span data-stu-id="90438-112">Scope</span></span>|<span data-ttu-id="90438-113">Edge</span><span class="sxs-lookup"><span data-stu-id="90438-113">Edge</span></span>|
|<span data-ttu-id="90438-114">版本</span><span class="sxs-lookup"><span data-stu-id="90438-114">Version</span></span>|<span data-ttu-id="90438-115">4.6.1</span><span class="sxs-lookup"><span data-stu-id="90438-115">4.6.1</span></span>|
|<span data-ttu-id="90438-116">類型</span><span class="sxs-lookup"><span data-stu-id="90438-116">Type</span></span>|<span data-ttu-id="90438-117">正在重定目標</span><span class="sxs-lookup"><span data-stu-id="90438-117">Retargeting</span></span>|
|<span data-ttu-id="90438-118">受影響的 API</span><span class="sxs-lookup"><span data-stu-id="90438-118">Affected APIs</span></span>|<ul><li><xref:System.IO.Compression.ZipFile.CreateFromDirectory(System.String,System.String)?displayProperty=nameWithType></li><li><xref:System.IO.Compression.ZipFile.CreateFromDirectory(System.String,System.String,System.IO.Compression.CompressionLevel,System.Boolean)?displayProperty=nameWithType></li><li><xref:System.IO.Compression.ZipFile.CreateFromDirectory(System.String,System.String,System.IO.Compression.CompressionLevel,System.Boolean,System.Text.Encoding)?displayProperty=nameWithType></li></ul>|

