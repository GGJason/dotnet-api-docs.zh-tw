### <a name="foreach-iterator-variable-is-now-scoped-within-the-iteration-so-closure-capturing-semantics-are-different-in-c5"></a><span data-ttu-id="03378-101">Foreach 迭代器變數的領域現在設定反覆項目的，因此 closure 擷取語意不相同 （在 C# 5)</span><span class="sxs-lookup"><span data-stu-id="03378-101">Foreach iterator variable is now scoped within the iteration, so closure capturing semantics are different (in C#5)</span></span>

|   |   |
|---|---|
|<span data-ttu-id="03378-102">詳細資料</span><span class="sxs-lookup"><span data-stu-id="03378-102">Details</span></span>|<span data-ttu-id="03378-103">開頭為 C# 5 (Visual Studio 2012)，<code>foreach</code>迭代器變數範圍內的反覆項目。</span><span class="sxs-lookup"><span data-stu-id="03378-103">Beginning with C# 5 (Visual Studio 2012), <code>foreach</code> iterator variables are scoped within the iteration.</span></span> <span data-ttu-id="03378-104">如果程式碼先前取決於未包含在變數，這可能會造成符號<code>foreach</code>的終止。</span><span class="sxs-lookup"><span data-stu-id="03378-104">This can cause breaks if code was previously depending on the variables to not be included in the <code>foreach</code>'s closure.</span></span> <span data-ttu-id="03378-105">這項變更症狀就是建立在時間有委派的值時，而不是在叫用委派時的時間的值傳遞給委派的迭代器變數會被視為。</span><span class="sxs-lookup"><span data-stu-id="03378-105">The symptom of this change is that an iterator variable passed to a delegate is treated as the value it has at the time the delegate is created, rather than the value it has at the time the delegate is invoked.</span></span>|
|<span data-ttu-id="03378-106">建議</span><span class="sxs-lookup"><span data-stu-id="03378-106">Suggestion</span></span>|<span data-ttu-id="03378-107">在理想情況下，您應該更新程式碼，以確保此新的編譯器行為。</span><span class="sxs-lookup"><span data-stu-id="03378-107">Ideally, code should be updated to expect the new compiler behavior.</span></span> <span data-ttu-id="03378-108">如果需要舊版語意，您可以將此迭代器變數取代成明確放在迴圈範圍外的不同變數。</span><span class="sxs-lookup"><span data-stu-id="03378-108">If the old semantics are required, the iterator variable can be replaced with a separate variable which is explicitly placed outside of the loop's scope.</span></span>|
|<span data-ttu-id="03378-109">範圍</span><span class="sxs-lookup"><span data-stu-id="03378-109">Scope</span></span>|<span data-ttu-id="03378-110">主要</span><span class="sxs-lookup"><span data-stu-id="03378-110">Major</span></span>|
|<span data-ttu-id="03378-111">版本</span><span class="sxs-lookup"><span data-stu-id="03378-111">Version</span></span>|<span data-ttu-id="03378-112">4.5</span><span class="sxs-lookup"><span data-stu-id="03378-112">4.5</span></span>|
|<span data-ttu-id="03378-113">類型</span><span class="sxs-lookup"><span data-stu-id="03378-113">Type</span></span>|<span data-ttu-id="03378-114">正在重定目標</span><span class="sxs-lookup"><span data-stu-id="03378-114">Retargeting</span></span>|

