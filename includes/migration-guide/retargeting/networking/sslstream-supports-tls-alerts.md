### <a name="sslstream-supports-tls-alerts"></a>SslStream 支援 TLS 警示

|   |   |
|---|---|
|詳細資料|失敗的 TLS 信號交換之後，第一個 I/O 讀取/寫入作業將會擲回 <xref:System.IO.IOException?displayProperty=name> 與內部 <xref:System.ComponentModel.Win32Exception?displayProperty=name> 例外狀況。 <xref:System.ComponentModel.Win32Exception?displayProperty=name> 的 <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> 代碼可以使用此[安全通道文件](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx)，從遠端合作對象對應至 TLS 警示。如需詳細資訊，請參閱 [RFC 2246: Section 7.2.2 Error alerts](https://tools.ietf.org/html/rfc2246#section-7.2.2) (RFC 2246：7.2.2 節錯誤警示)。 .NET 4.6.2 和更早版本的行為是如果另一方交握失敗，傳輸通道 (通常是 TCP 連線) 會在寫入或讀取期間逾時，並在之後立即拒絕連線。|
|建議|呼叫網路 I/O API (例如 <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)>/<xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> 的應用程式，應該處理 <xref:System.IO.IOException> 或 <xref:System.TimeoutException?displayProperty=name>。從 .NET 4.7 開始，預設會啟用 TLS 警示功能。 以 .NET 4.0 - .NET 4.6.2 為目標且在 .NET 4.7 或更高版本的系統上執行的應用程式，會將功能停用以保留相容性。若為 .NET 4.6 和更高版本，且在 .NET 4.7 或更高版本的架構上執行的應用程式，您可以使用下列設定 API 來啟用或停用此功能。<ul><li>以程式設計的方式：</li></ul>必須是應用程式執行的第一件事，因為 ServicePointManager 只會初始化一次：<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig：</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>登錄機碼 (電腦全域)：</li></ul>將值設定為 'false'，以在 .NET 4.6 - 4.6.2 中啟用功能。<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|範圍|Edge|
|版本|4.7|
|類型|正在重定目標|
|受影響的 API|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

