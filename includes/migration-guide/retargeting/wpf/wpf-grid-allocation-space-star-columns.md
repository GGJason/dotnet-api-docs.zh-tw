### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>WPF 方格配置到星狀資料行的空間

|   |   |
|---|---|
|詳細資料|從.NET Framework 4.7 開始，WPF 會取代此演算法的<xref:System.Windows.Controls.Grid>配置空間，以使用 *-資料行。 這會變更指派給的實際寬度 *-中的案例數目的資料行：<ul><li>當一或多個 *-資料行也會使用覆寫該資料行的調和間距配置的最小值或最大寬度。 （最小寬度可以衍生從明確 MinWidth 宣告，或隱含的最小值取自資料行的內容。 最大寬度只能定義明確地從 MaxWidth 宣告。）</li><li>當一或多個 *-宣告極大的資料行 *-加權，大於 10 ^298。</li><li>當 *-加權是完全不同發生浮點不穩定 （溢位、 反向溢位，遺失有效位數）。</li><li>當版面配置進位已啟用，且有效顯示 DPI 夠高時。</li></ul>在前兩個情況中，新的演算法所產生的寬度可以明顯不同於所產生舊的演算法。在最後一個的情況下，差異將最多一個或兩個像素為單位。新的演算法修正數個 bug 出現在舊的演算法：<ol><li>資料行的總配置可能會超過方格的寬度。 資料行的按比例共用若低於其大小下限，配置空間時就可能發生這個狀況。 此演算法會配置大小下限，因此，其他資料行的可用空間會減少。 如果有任何 *-將資料行配置保留，總計配置太大。</li><li>總配置的方格寬度可能會不足。 這是雙重 # 1，超過最大的大小，以及未配置的資料行的調和間距的共用時所引發的問題 *-由左到 slack 所佔用的資料行。</li><li>兩個 *-資料行可以接收不成比例的配置其 *-加權。 相較於第 1 點/第 2 點，這是程度較輕的錯誤，在為 *-columns A、B 和 C (依此順序) 配置空間時，若 B 的按比例共用違反其下限 (或上限) 條件約束，就會發生這個狀況。 如上所述，這會使資料行 C 的可用的空間產生變化，可能會獲得較 A 更少 (或更多) 的比例配置，</li><li>具有極大的加權資料行 (&gt; 10 ^298) 的所有處理都有加權 10 ^298。 它們之間 (及權數較小的資料行之間) 的比例差異則可忽略。</li><li>使用 inifinte 加權資料行不會正確處理。 [事實上，您無法將權數設為無限大，但這是人為限制。 配置程式碼會嘗試處理它，但成效不彰。]</li><li>避免溢位、反向溢位時的幾個小問題、精確度失準及類似的浮點數問題。</li><li>版面配置進位的調整在 DPI 足夠高的情況下不正確。</li></ol>新的演算法會產生符合下列準則： A 的結果。 若要指派的實際寬度 *-資料行永遠不會是小於或大於最大寬度小於其最小寬度。B. 每個<em>-資料行不是指派其最小值或最大寬度指派成正比寬度其<em>-加權。更明確地說，如果兩個資料行以寬度 x 宣告</em>和 y</em>分別和任何資料行接收其最小值或最大寬度，實際的寬度 v 和 w 指派給資料行是否以相同比例： v/w i n = = x / y.C. 總寬度配置給&quot;比例&quot;*-資料行之後將配置到條件約束的資料行是相等的可用空間 (固定，自動和 *-配置其最小值或最大寬度的資料行)。 這可能會執行個體是零，如果最小寬度的總和超過方格 availbable 寬度。D. 所有這些陳述式是相對於必須解譯&quot;理想&quot;版面配置。 版面配置進位，則為作用中，當實際的寬度可能會不同於的理想寬度最多可達一個像素。舊的演算法會接受 (A)，但無法接受以上所述的案例中的其他準則。所有項目相關的資料行和本文中的寬度也適用於資料列和高度。|
|建議|根據預設，應用程式從.NET Framework 4.7 的.NET framework 目標版本，將會看到新的演算法，同時應用程式的目標.NET Framework 4.6.2 或更早版本，將會看到舊的演算法。若要覆寫預設值，請使用下列組態設定：<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>值 'true' 選取舊的演算法，因此，'false' 選取新的演算法。|
|範圍|次要|
|版本|4.7|
|類型|正在重定目標|

